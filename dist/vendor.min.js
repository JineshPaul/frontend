!function(){"use strict";function e(e,t,o,s,a,i){e.when("/",{title:"",templateUrl:"modules/authentication/views/login.html",controller:"authController"}).when("/widgets",{title:"",templateUrl:"modules/common/views/widgets.html"}).otherwise({redirectTo:"/404",title:"Page not found",templateUrl:"modules/common/views/404.html"}),t.interceptors.push("finWebInterCepter"),o.defaults.stripTrailingSlashes=!1,a.init({client_id:"408406696644-sesnpe3i5lftggivp41njj1hk6845o08.apps.googleusercontent.com"}),i.html5Mode({enabled:!0,requireBase:!1})}function t(e,t,o,s,a,i,n){function r(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-79265201-1","auto"),ga("require","eventTracker"),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("require","cleanUrlTracker"),ga("send","pageview")}o.userDetails=JSON.parse(sessionStorage.getItem("userDetails"))||{},o.assetAllocationTables=JSON.parse(sessionStorage.getItem("assetAllocationTables"))||[],o.drawerOpen=!1,o.selectedCriteria=null,o.toolTipEquiDebt=a.QUICK_TIP_EQUIDEBT,o.toolTipProjInv=a.QUICK_TIP_ProjInvGrow;var l,c=[];o.$on("$locationChangeStart",function(e,t,n){1==o.drawerOpen&&o.drawerAnimate(),o.getStarted=i(s.path(),a.pagesWithAlreadySignMsg),o.menu=i(s.path(),a.pagesWithOnlyMenu),o.showLogin=i(s.path(),a.pagesWithLogin),o.isRestricted=i(s.path(),a.restrictedPages),o.userFlags=JSON.parse(sessionStorage.getItem("userFlags"))||{},c.push(s.path())}),o.$on("$routeChangeSuccess",function(t,a,i){o.title=e.current.title,o.subHeader=e.current.subHeader,o.redirectURL=e.current.redirectUrl,o.loggedIn=!!o.userDetails.user,!o.loggedIn&&o.isRestricted?s.path("/"):"/"==s.path()&&o.loggedIn&&s.path("/dashboard")}),o.userLogout=function(){o.$broadcast("userloggedOut")},o.$on("userloggedIn",function(e,t){sessionStorage.setItem("userDetails",JSON.stringify({user:t.user})),sessionStorage.setItem("tokens",JSON.stringify({tokens:t.tokens})),sessionStorage.setItem("assetAllocationTables",JSON.stringify(t.asset_allocation_tables)),o.assetAllocationTables=JSON.parse(sessionStorage.getItem("assetAllocationTables"))||[]}),o.$on("refreshCredentials",function(e,t){sessionStorage.setItem("userFlags",JSON.stringify(t))}),o.$on("userloggedOut",function(e,t){s.path("/"),sessionStorage.clear(),o.$$phase||o.$apply()}),o.back=function(){l=c.length>0?c.splice(-2)[0]:"/",s.path(l)},o.updateLocalValue=function(e,t,o,s,a){var i="local"==t?JSON.parse(localStorage.getItem(e)):JSON.parse(sessionStorage.getItem(e));o in i&&(i[o][s]=a)},window.addEventListener("online",function(){o.online=!0},!1),window.addEventListener("offline",function(){o.online=!1},!1),o.$watch("online",function(e){}),o.drawerAnimate=function(){$(".drawer").hasClass("open")?($(".drawer").removeClass("open"),$(".drawer-overlay").removeClass("open"),$(".page-wrapper").removeClass("open"),$(".bar1,.bar2").removeClass("open"),o.drawerOpen=!1):($(".drawer").addClass("open"),$(".drawer-overlay").addClass("open"),$(".page-wrapper").addClass("open"),$(".bar1,.bar2").addClass("open"),o.drawerOpen=!0)},o.redirectLogin=function(){$("#sessionLogoutModal").modal("hide"),s.path("/")},r()}angular.module("finApp",["ngRoute","ngResource","ngSanitize","ngScrollbars","ngDialog","datepicker","google-signin","signature","finApp.config","finApp.directives","finApp.text","finApp.services","finApp.filters","angularLazyImg","finApp.auth","finApp.registration","finApp.riskAssesment","finApp.dashboard","finApp.planInvest","finApp.goals","finApp.registerInvestor","finApp.smartPortFolio","finApp.investWithdraw","finApp.trackPerformance"]).config(e).run(t),e.$inject=["$routeProvider","$httpProvider","$resourceProvider","ScrollBarsProvider","GoogleSigninProvider","$locationProvider"],t.$inject=["$route","$routeParams","$rootScope","$location","appConfig","checkPath","busyIndicator"]}();var finApp=finApp||{};!function(){"use strict";finApp.authControllerPrototype={completeLogin:function(e,t){var o=this,s="";if(t&&"onlyLogin"==t){console.log("onlyLogin");var s="onlyLogin"}"success"in e?this.authService.submitSuccess(e,s).then(function(e){o.userDetailsService().then(function(e){o.rootScope.$broadcast("refreshCredentials",e.success),o.location.path("/dashboard")})}):this.scope.errorMessage=e.Message+" "+e.Error},completeGoogleLogin:function(){this.ngDialog.closeAll(),this.scope.completeLogin(this.scope.registerSuccessData,"onlyLogin")},registerPhone:function(e){var t=this;e&&(this.scope.googleAuthParams.phone_number=e,this.authService.googleRegister(this.scope.googleAuthParams).then(function(e){"success"in e?(t.ngDialog.closeAll(),t.scope.registerSuccessData=e,t.ngDialog.open({template:"modules/authentication/views/googleOtp.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t.scope})):t.scope.errorPhone=e.Message+" "+e.Error}))},processGoogleRegister:function(){this.scope.ngDialog=this.ngDialog,this.ngDialog.open({template:"modules/authentication/views/googleRegistration.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:this.scope})},mergeAccounts:function(e){var t=this;this.scope.googleAuthParams.password=e.password,this.authService.googleRegisterExistingUser(this.scope.googleAuthParams).then(function(e){"success"in e?(t.ngDialog.closeAll(),t.scope.completeLogin(e,"onlyLogin")):t.scope.errorMessage=e.Message+" "+e.Error})},cancelGoogleAccountMerge:function(){this.ngDialog.closeAll()},confirmGoogleAccountMerge:function(){this.ngDialog.closeAll(),this.ngDialog.open({template:"modules/authentication/views/confirmMergeLogin.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:this.scope})},processGoogleAccountMerge:function(){this.scope.modalMessage="You have an existing FinAskus account with the same Google email.\r Your Google account will be merged with the FinAskus account. \r\n Please proceed to validate your existing FinAskus account.",this.ngDialog.open({template:"modules/authentication/views/confirmMerge.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:this.scope})},googleSignIn:function(){var e,t,o=this,s=function(){o.scope.googleAuthParams={auth_code:e,email:t.getEmail(),is_web:!0,image:t.getImageUrl()},o.authService.googleLogin(o.scope.googleAuthParams).then(function(e){if("success"in e){var t=e.success.user_status;2==t?o.scope.completeLogin({success:e.success.res},"onlyLogin"):3==t?o.scope.processGoogleRegister():4==t&&o.scope.processGoogleAccountMerge()}else o.scope.errorMessage=e.Message+" "+e.Error})},a=navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.userAgent.indexOf("Android")==-1;a?o.GoogleSignin.grantOfflineAccess({scope:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",scopes:"https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",redirect_uri:"postmessage",approval_prompt:"force"}).then(function(a){e=a.code;var i=o.GoogleSignin.getUser();t=i.getBasicProfile(),t&&s()},function(e){console.log(e)}):o.GoogleSignin.signIn().then(function(a){var i=a.getAuthResponse();t=a.getBasicProfile(),o.GoogleSignin.grantOfflineAccess({authuser:i.session_state.extraQueryParams.authuser,scopes:"https://www.googleapis.com/auth/userinfo.email",redirect_uri:"postmessage"}).then(function(t){e=t.code,s()},function(e){console.log(e)})},function(e){console.log(JSON.stringify(e))})},googleRegisterResendOtp:function(){this.registerService.resendOtp(this.scope.registerSuccessData.success.tokens).then(function(e){alert(JSON.stringify(e))})},googleRegisterConfirmOtp:function(e){var t=this;this.registerService.confirmOtp(e,this.scope.registerSuccessData.success.tokens).then(function(e){"success"in e?(t.ngDialog.closeAll(),setTimeout(function(){t.scope.completeLogin(t.scope.registerSuccessData)},1e3)):t.scope.errorOtp=e.Message})}}}();var finApp=finApp||{};!function(){"use strict";finApp.goalControllerPrototype={showEquityModal:function(e){"undefined"!=typeof e&&void 0!=e||(e=1e3),this.scope.minAmount=e,$("#equiDeptModal").modal("show")},reloadRoute:function(e,t){this.rootScope.selectedCriteria=e,this.rootScope.$$phase||this.rootScope.$apply(),"undefined"==typeof t&&(t=2),this.rootScope.slideTobeChanged=t,this.route.reload()},appendValues:function(e){e.goal_plan_type=this.rootScope.selectedCriteria,console.log("value",e),this.goalTypeService.setSavedValues(e)},portfolioFactoring:function(){var e=this;this.rootScope.showPortfolioFactoring=!1,this.timeout(function(){e.location.path("/dashboard"),e.scope.$apply()},5e3)},getAssetAllocationCategory:function(){var e=new Date,t=this.scope.modelVal.A2-e.getFullYear(),o=this;this.goalModelObject.tenure=t,this.assetAllocationService.computeAssetAllocationCategory(t).then(function(e){"success"in e?(console.log("Success asset category: "+e.success.asset_allocation_category),o.goalModelObject.assetAllocationCategory=e.success.asset_allocation_category):o.goalModelObject.assetAllocationCategory="A",o.scope.$broadcast("assetAllocationCategoryChanged")})},calculateRecommendedSIP:function(e){var t=this,o=function(){var o=t.goalFormulaeService.computeSIPForCorpus({corpus:e,tenure:t.goalModelObject.tenure},t.goalModelObject.assetAllocationCategory),s={};s=t.scope.modelVal.sip&&parseInt(o.computedSIP)==parseInt(t.scope.modelVal.sip)?t.scope.modelVal.assetAllocation:o.assetAllocation,s.equityInitial=o.assetAllocation.equity,t.goalModelObject.perMonth=o.computedSIP,t.goalModelObject.assetAllocation=o.assetAllocation,t.scope.modelVal.A4=t.scope.modelVal.A4||t.goalModelObject.perMonth,t.goalModelObject.corpus=e,t.setModelVal(s,o.computedSIP)};this.goalModelObject.assetAllocationCategory?o():this.scope.$on("assetAllocationCategoryChanged",o)},calculateCorpus:function(e){var t=this,o=function(){t.scope.modelVal.estimate_selection_type="",delete t.scope.modelVal.estimate_selection_type;var o=t.goalFormulaeService.computeCorpusForSIP({sip:e,tenure:t.goalModelObject.tenure},t.goalModelObject.assetAllocationCategory);t.goalModelObject.corpus=o.computedCorpus;var s={};s=t.scope.modelVal.corpus&&parseInt(o.computedCorpus)==parseInt(t.scope.modelVal.corpus)?t.scope.modelVal.assetAllocation:o.assetAllocation,s.equityInitial=o.assetAllocation.equity,t.goalModelObject.assetAllocation=o.assetAllocation,t.scope.modelVal.A3=parseInt(t.goalModelObject.corpus),console.log("calculateCorpus: "+JSON.stringify(o.assetAllocation)+" corpus: "+o.computedCorpus),t.setModelVal(s,e)};this.goalModelObject.assetAllocationCategory?o():this.scope.$on("assetAllocationCategoryChanged",o)},handleGoalEstimatesResponse:function(e){var t=this;if("success"in e){console.log("Success goal_estimation: "+e.success.goal_estimation);for(var o=e.success.goal_estimation,s={},a=0;a<o.length;a++){var i=t.goalFormulaeService.computeSIPForCorpus({corpus:o[a].corpus,tenure:t.goalModelObject.tenure},t.goalModelObject.assetAllocationCategory);s[o[a].estimate_type]={corpus:o[a].corpus,sip:i.computedSIP,assetAllocation:i.assetAllocation}}if(t.goalModelObject.goalEstimates=s,""==t.scope.modelVal.estimate_selection_type||void 0==t.scope.modelVal.estimate_selection_type)t.scope.modelVal.estimate_selection_type="",delete t.scope.modelVal.estimate_selection_type,t.scope.noEstimateSelection();else switch(t.scope.modelVal.estimate_selection_type){case"op1":t.scope.estimateSelectionChanged(t.appConfig.estimateType.BUDGET);break;case"op2":t.scope.estimateSelectionChanged(t.appConfig.estimateType.COMFORTABLE);break;case"op3":t.scope.estimateSelectionChanged(t.appConfig.estimateType.LUXURY);break;default:t.scope.estimateSelectionChanged(t.appConfig.estimateType.COMFORTABLE)}}},estimateSelectionChanged:function(e,t){var o=this;this.goalModelObject.goalEstimates[e].sip!=o.scope.modelVal.sip&&"change"!=t?(console.log("not equal"),o.scope.modelVal.estimate_selection_type="",delete o.scope.modelVal.estimate_selection_type,o.scope.automobile.corpus=o.scope.modelVal.corpus,this.goalModelObject.corpus=o.scope.modelVal.corpus,this.goalModelObject.perMonth=o.scope.modelVal.sip,this.goalModelObject.assetAllocation=this.scope.modelVal.assetAllocation||this.goalModelObject.goalEstimates[e].assetAllocation,this.goalModelObject.assetAllocation.equityInitial=this.goalModelObject.goalEstimates[e].assetAllocation.equity,this.setModelVal(this.goalModelObject.assetAllocation,this.goalModelObject.perMonth)):(this.scope.modelVal.A3=this.goalModelObject.goalEstimates[e].corpus,this.scope.modelVal.A4=this.goalModelObject.goalEstimates[e].sip,this.goalModelObject.corpus=this.goalModelObject.goalEstimates[e].corpus,this.goalModelObject.perMonth=this.goalModelObject.goalEstimates[e].sip,this.scope.modelVal.sip==this.goalModelObject.goalEstimates[e].sip?this.goalModelObject.assetAllocation=this.scope.modelVal.assetAllocation:this.goalModelObject.assetAllocation=this.goalModelObject.goalEstimates[e].assetAllocation,this.goalModelObject.assetAllocation.equityInitial=this.goalModelObject.goalEstimates[e].assetAllocation.equity,this.setModelVal(this.goalModelObject.assetAllocation,this.goalModelObject.perMonth))},noEstimateSelection:function(){console.log("sdfdfsd",this.goalModelObject),this.goalModelObject.perMonth=this.scope.modelVal.A4,this.goalModelObject.corpus=this.scope.modelVal.A3;var e=this.goalFormulaeService.computeCorpusForSIP({sip:this.goalModelObject.perMonth,tenure:this.goalModelObject.tenure},this.goalModelObject.assetAllocationCategory);this.scope.modelVal.assetAllocation&&(this.scope.modelVal.assetAllocation.equityInitial=e.assetAllocation.equity,this.goalModelObject.assetAllocation=this.scope.modelVal.assetAllocation,this.setModelVal(this.goalModelObject.assetAllocation,this.goalModelObject.perMonth))},callModel:function(e,t,o,s){console.log("debtValue",e,"equityValue",t,"amount",o),"undefined"!=typeof s&&void 0!=s||(s=1e3),this.scope.minAmount=s,this.scope.amount=o,this.scope.equity=e,this.scope.equity2=t;var a=Math.round(this.scope.equity/100*o),i=Math.round(this.scope.equity2/100*o);this.scope.debtAmountModal=a,this.scope.equityAmountModal=i,jQuery("#equiDeptModal").modal("show")},setModelVal:function(e,t){this.scope.sipAmount=t,this.scope.modelVal.assetAllocation=e;var o=Math.round(e.debt/100*t),s=Math.round(e.equity/100*t);this.scope.modelVal.debtAmount=o,this.scope.modelVal.equityAmount=s,this.scope.getGoalGraphDetails()},changeDebtModal:function(){this.scope.equity2=100-this.scope.equity,this.scope.debtAmountModal=Math.round(this.scope.equity/100*this.scope.amount),this.scope.equityAmountModal=Math.round(this.scope.equity2/100*this.scope.amount)},changeEquityModal:function(){this.scope.equity=100-this.scope.equity2,this.scope.equityAmountModal=Math.round(this.scope.equity2/100*this.scope.amount),this.scope.debtAmountModal=Math.round(this.scope.equity/100*this.scope.amount)},saveEquityDebtMix:function(){console.log("Saved mix"),this.scope.modelVal.assetAllocation.debt=this.scope.equity,this.scope.modelVal.assetAllocation.equity=this.scope.equity2,this.scope.modelVal.debtAmount=this.scope.debtAmountModal,this.scope.modelVal.equityAmount=this.scope.equityAmountModal,jQuery("#equiDeptModal").modal("hide"),this.getGoalGraphDetails()},resetAllocation:function(e){this.scope.modelVal.assetAllocation.equity=e,this.scope.modelVal.assetAllocation.debt=100-e,this.scope.modelVal.debtAmount=this.scope.modelVal.assetAllocation.debt/100*this.scope.sipAmount,this.scope.modelVal.equityAmount=this.scope.modelVal.assetAllocation.equity/100*this.scope.sipAmount,this.getGoalGraphDetails(),console.log("modelVal",this.scope.modelVal)},getFundData:function(e,t){var o=this;o.busyIndicator;this.goalsService.getFundSelection(e).then(function(e){"success"in e?(o.rootScope.setFundData=e.success,o.location.path("/recommendedSchemes"),t.hide()):console.log(e.Message)})},getGraphObject:function(){return this.scope.graphObject||(this.scope.graphObject=this.goalsService.initGoalGraphDetails()),this.scope.graphObject},getGoalGraphDetails:function(){this.goalsService.getGoalGraphDetails(this.scope.graphObject,this.scope.modelVal.assetAllocation,this.scope.modelVal.A4,0,this.goalModelObject.tenure),console.log("$scope.graphObject",this.scope.graphObject)}}}();var finApp=finApp||{};!function(){"use strict";finApp.registerInvestorControllerPrototype={imageUpload:function(e,t){var o=e.files[0],s=(o.name.substr(o.name.lastIndexOf(".")+1,o.name.length),["jpg","png","jpeg"]),a=this;this.scope.Signature="","undefined"==typeof t&&(t="imageUrl"),this.scope.checkImageFile(o,function(i){if(s.indexOf(a.scope.Signature)!=-1){var n=new FileReader;n.onload=function(o){a.scope.$apply(function(s){a.scope.modelVal[t]=o.target.result,a.scope[t]=e.files[0]})},n.readAsDataURL(o)}})},checkImageFile:function(e,t){var o=e.slice(0,4),s=this,a=new FileReader;a.onloadend=t,a.readAsArrayBuffer(o),a.onload=function(e){var t=new DataView(a.result),o=t.getUint32(0,!1).toString(16);switch(o){case"89504e47":s.scope.Signature="png";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":s.scope.Signature="jpeg"}}},uploadFileToServer:function(e,t){var o=this;"undefined"!=typeof e&&e||(e="imageUrl"),"undefined"==typeof t&&(t=!1),this.registerInvestorService.isVaultLocked()?t&&o.location.path(o.rootScope.redirectUrlContext):(this.busyIndicator.show(),this.service.uploadFileToServer(this.scope[e]).then(function(){o.busyIndicator.hide(),t&&o.location.path(o.rootScope.redirectUrlContext)},function(){o.busyIndicator.hide()}))},initialize:function(){var e=this;e.busyIndicator.show(),!this.rootScope.selectedCriteria,this.service.getSavedValues().then(function(t){e.busyIndicator.hide(),"success"in t&&(e.scope.modelVal=t.success)},function(){e.busyIndicator.hide()})},saveInfo:function(e){var t=this;"undefined"==typeof e&&(e=!1),this.registerInvestorService.isVaultLocked()?(t.scope.gotToNextSlide(),e&&t.location.path(t.rootScope.redirectUrlContext)):(t.busyIndicator.show(),this.service.setSavedValues(this.scope.modelVal).then(function(o){t.busyIndicator.hide(),"Message"in o?(t.scope.errorPopupMessage=o.Message,t.scope.ngDialog=t.ngDialog,t.ngDialog.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t.scope})):"success"in o&&(console.log("$scope.step",t.scope.step),t.scope.gotToNextSlide(),e&&t.location.path(t.rootScope.redirectUrlContext))},function(){t.busyIndicator.hide()}))},appendValue:function(){},reloadRoute:function(e,t){this.rootScope.selectedCriteria=e,this.rootScope.$$phase||this.rootScope.$apply(),"undefined"==typeof t&&(t=2),this.rootScope.slideTobeChanged=t,this.route.reload()}}}(),function(){"use strict";function e(e,t){e.when("/gettingStarted",{templateUrl:"modules/authentication/views/getstarted.html",controller:"authController"})}angular.module("finApp.auth",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/dashboard",{title:"Dashboard",templateUrl:"modules/dashboard/views/dashboard.html",controller:"dashboardController"})}angular.module("finApp.dashboard",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/goals",{title:"Goals",subHeader:"GO BACK TO PLAN INVESTMENTS",redirectUrl:"/planInvest",templateUrl:"modules/goals/views/goal.html",controller:"goalsController"})}angular.module("finApp.goals",[]).config(e).constant("goalConfig",{QUICKINVEST_LUMPSUM_TERM:10,TAX_TERM:3}),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/investWithdrawStart",{title:"Invest/Withdraw",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/investwithdraw/views/investWidrawStart.html",controller:"investWithdrawController"}).when("/investStep1",{title:"Review Investment Plan",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/investwithdraw/views/investStep1.html",controller:"investWithdrawController"}).when("/reviewInvestment",{title:"Review Investment Plan",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/investwithdraw/views/reviewInvestment.html",controller:"investWithdrawController"}).when("/withdrawStart",{title:"Withdraw",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/investwithdraw/views/withdrawStart.html",controller:"investWithdrawController"}).when("/investmentReturn",{title:"Investment Status",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/investwithdraw/views/investmentReturn.html",controller:"investWithdrawController"})}angular.module("finApp.investWithdraw",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/planInvest",{title:"Plan Investments",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/views/planinvest.html",controller:"planInvestController"})}angular.module("finApp.planInvest",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/registerInvestorStart",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/registerInvestorStarted.html",controller:"registerInvestorController"}).when("/registerInvestorInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/registerInvestorInfo.html",controller:"registerInvestorController"}).when("/investorInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/investorInfo.html"}).when("/bankInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/bankInfo.html"}).when("/contactInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/contactInfo.html"}).when("/nomineeInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/nomineeInfo.html"}).when("/identityInfo",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/identityInfo.html"}).when("/registerInvestorConfirm",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/registerInvestorConfirmation.html",controller:"registerSignatureController"}).when("/registerInvestorReview",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/registerInvestorReview.html",controller:"registerInvestorController"}).when("/completeVideoSelfie",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/completeVideoSelfie.html",controller:"registerSelfieController"}).when("/registrationCompleted",{title:"Investor Registration",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registerinvestor/views/registrationCompleted.html"})}angular.module("finApp.registerInvestor",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/registration",{title:"Registration",templateUrl:"modules/registration/views/register.html",controller:"registerController"}).when("/settings",{title:"Settings",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/registration/views/account_settings.html",controller:"registerController"})}angular.module("finApp.registration",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/riskAssesment",{title:"",templateUrl:"modules/riskassesment/views/riskassesment.html",controller:"riskController"}).when("/riskAssesmentMoreQuestions",{title:"",templateUrl:"modules/riskassesment/views/riskassesmentMore.html",controller:"riskController"})}angular.module("finApp.riskAssesment",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/recommendedSchemes",{title:"Recommended Schemes",templateUrl:"modules/smartportfolio/views/recommended.html",controller:"recommendedController"}).when("/compareAndModify",{title:"Compare & Modify Schemes",templateUrl:"modules/smartportfolio/views/compare.html",controller:"recommendedController"}).when("/schemeCompare",{title:"Scheme Comparision",subHeader:"GO BACK TO COMPARE & MODIFY",redirectUrl:"/compareAndModify",templateUrl:"modules/smartportfolio/views/schemeComparision.html",controller:"recommendedController"}).when("/schemeFactsheet",{title:"Scheme Factsheet",subHeader:"GO BACK",redirectUrl:"/recommendedSchemes",templateUrl:"modules/smartportfolio/views/schemeFactsheet.html",controller:"recommendedController"})}angular.module("finApp.smartPortFolio",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/trackPerformanceStart",{title:"Track Performance",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/trackperformance/views/trackPerformanceStart.html",controller:"trackPerformanceController"})}angular.module("finApp.trackPerformance",[]).config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r){this.scope=e,this.rootScope=t,this.location=o,this.userDetailsService=s,this.authService=a,this.registerService=i,this.GoogleSignin=n,this.ngDialog=r;this.scope.completeLogin=angular.bind(this,this.completeLogin),this.scope.completeGoogleLogin=angular.bind(this,this.completeGoogleLogin),this.scope.registerPhone=angular.bind(this,this.registerPhone),this.scope.processGoogleRegister=angular.bind(this,this.processGoogleRegister),this.scope.mergeAccounts=angular.bind(this,this.mergeAccounts),this.scope.cancelGoogleAccountMerge=angular.bind(this,this.cancelGoogleAccountMerge),this.scope.confirmGoogleAccountMerge=angular.bind(this,this.confirmGoogleAccountMerge),this.scope.processGoogleAccountMerge=angular.bind(this,this.processGoogleAccountMerge),this.scope.googleSignIn=angular.bind(this,this.googleSignIn),this.scope.googleRegisterResendOtp=angular.bind(this,this.googleRegisterResendOtp),this.scope.googleRegisterConfirmOtp=angular.bind(this,this.googleRegisterConfirmOtp),e.verifyLogin=function(t){t&&(t.is_web=!0),a.verifyLogin(t).then(function(t){e.completeLogin(t,"onlyLogin")})},e.processPasswordReset=function(){e.ngDialog=r,e.ngDialog.open({template:"modules/authentication/views/forgotPassword.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e})},e.callPasswordReset=function(t){e.ngDialog.closeAll(),a.resetPassword(t).then(function(e){})}}angular.module("finApp.auth").controller("authController",e),e.$inject=["$scope","$rootScope","$location","userDetailsService","authService","registerService","GoogleSignin","ngDialog"],e.prototype=finApp.authControllerPrototype}(),function(){"use strict";function e(e,t,o,s,a){function i(t){var a=s.defer(),i=e(o.API_BASE_URL+"/user/login/",{},{Check:{method:"POST"}});return i.Check(t,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message,Error:e.error})},function(e){a.reject(e)}),a.promise}function n(t){var a=s.defer(),i=e(o.API_BASE_URL+"/user/reset/password/",{},{Check:{method:"POST"}});return i.Check(t,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message,Error:e.error})},function(e){a.reject(e)}),a.promise}function r(e,o){var i=s.defer();if(t.$broadcast("userloggedIn",e.success),localStorage.getItem("riskData")){t.loggedIn=!0,t.action=o;var n=JSON.parse(localStorage.getItem("riskData"));a.getAssesmentResult(n).then(function(e){"success"in e&&localStorage.removeItem("riskData"),i.resolve({success:"success"})})}else i.resolve({success:"success"});return i.promise}function l(t){var a=s.defer(),i=e(o.API_BASE_URL+"/user/google/login/",{},{Check:{method:"POST"}});return i.Check(t,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message,Error:e.error})},function(e){a.reject(e)}),a.promise}function c(t){var a=new FormData;a.append("email",t.email),a.append("phone_number",t.phone_number),a.append("auth_code",t.auth_code),a.append("is_web",t.is_web),a.append("image",t.image);var i=s.defer(),n=e(o.API_BASE_URL+"/user/google/register/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message,Error:e.error})},function(e){i.reject(e)}),i.promise}function u(t){var a=new FormData;a.append("email",t.email),a.append("password",t.password),a.append("auth_code",t.auth_code),a.append("is_web",t.is_web);var i=s.defer(),n=e(o.API_BASE_URL+"/user/google/register/first/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message,Error:e.error})},function(e){i.reject(e)}),i.promise}return{verifyLogin:i,submitSuccess:r,googleLogin:l,googleRegister:c,googleRegisterExistingUser:u,resetPassword:n}}angular.module("finApp.auth").factory("authService",e),e.$inject=["$resource","$rootScope","appConfig","$q","riskService"]}(),function(){"use strict";angular.module("finApp.config",[]).constant("appConfig",{version:.01,API_BASE_URL:"https://api.finaskus.com/v3.0",restrictedPages:[],noTokenAPI:["/user/login/","/core/assess/new/response/","/user/register/"],pagesWithAlreadySignMsg:["/gettingStarted","/riskAssesment","/riskAssesmentMoreQuestions"],pagesWithOnlyMenu:["/registration"],pagesWithLogin:["/registration"],retirement:{0:[{tip:"Starting early in retirement goal can make a big difference to your corpus at the time of retirement."}],1:[{tip:'<span class="currency">&#8377</span>1 Crore in 20'}],2:[{tip:"<ul><li>Existing savings like EPF can grow to be a significant nest egg in retirement</li><li>For estimation, your savings are projected to grow @10% annually till you retire.</li></ul>"}],3:[{tip:"<ul><li>"}]},education:{0:[{tip:"Starting early in a goal can make a big difference to your corpus at the time when you need it."}],1:[{tip:"<ul><li>An Indian education is a preferred alternative to education abroad if the eventual goal is to stay in India.</li><li>Choosing a college abroad/in another town has significant cost addition like travel/hostel.</li><li>Your current savings are projected to grow @8% annualized till your goal is achieved."}]},property:{0:[{tip:"<ul><li>Banks typically would cover 75-85% of property value in granting a loan.</li><li>Your current savings are projected to grow @8% annualized till your goal is achieved.</li></ul>"}]},automobile:{0:[{tip:"<ul><li>Running costs of diesel cars tend to be higher than petrol cars. Use our Diesel vs. Petrol calculator to decide</li><li>On-road cost of car includes registration and insurance apart from the ex-showroom costs.</li><li>Banks would typically cover 70-80% of on-road vehicle cost in granting a loan.</li></ul>"}]},vacation:{0:[{tip:"<ul><li>A vacation abroad costs significantly higher in terms of international flights and visa costs</li><li>Your current savings are projected to grow @8% annualized till your goal is achieved</li></ul>"}]},wedding:{0:[{tip:"<ul><li>A multi-day or out-station wedding plan involves higher costs like travel and stay.</li><li>Your current savings are projected to grow @8% annualized till your goal is achieved.</li></ul>"}]},jewellery:{0:[{
tip:"<ul><li>Gold as an investment has historically generated lower returns than equity markets.</li><li>Your current savings are projected to grow at 8% annualized till your goal is achieved.</li></ul>"}]},savetax:{0:[{tip:"<ul><li>Amount invested in ELSS schemes will have a lock-in period of 3 years.</li><li>Investment in ELSS schemes can be deemed towards a 3-year financial goal, or even for long term wealth building.</li></ul>"}]},riskProfile:{low:"low",belowAverage:"belowAverage",average:"average",aboveAverage:"aboveAverage",high:"high"},returnRate:{equity:15,debt:9,liquid:7},assetAllocationCategory:{OnlyEquity:"OnlyEquity",OnlyDebt:"OnlyDebt",A:"A",B:"B",C:"C",D:"D",E:"E"},riskProfileToAssetAllocationCategory:{low:"A",belowAverage:"B",average:"C",aboveAverage:"D",high:"E"},estimateType:{BUDGET:"budget",COMFORTABLE:"comfortable",LUXURY:"luxury"},otherGoals:["invest","tax","liquid"],financialGoals:["retirement","education","property","automobile","vacation","wedding","event","jewellery"],QUICKINVEST_LUMPSUM_TERM:10,TAX_TERM:3,LIQUID_LUMPSUM_TERM:3,TAX_DEFAULT_ALLOCATION:{equity:0,debt:0,elss:100,liquid:0},QUICK_TIP_EQUIDEBT:[{tip:"<strong>Equity mutual funds:</strong> are those that invest in equities / stocks. They typically deliver higher returns over the long term (projected at 15% annualized, ideally for investment duration > 5 years), but they are riskier and can fluctuate in the short term."},{tip:"<strong>Debt mutual funds:</strong> are those that generate steady Income from investing in instruments such as Corporate bonds, Government Bonds, Treasury Bills, etc. These are less risky and typically generate 6-10% returns depending on the time horizon of investment, security tenure and relative risk."},{tip:"<Strong>Equity / Debt Mix:</strong> is the split of total investments between Equity and Debt instruments. We recommend the right mix for you based on your risk assessment and horizon of investment. However, you can modify this if you prefer a higher / lower risk portfolio, and the graph of ‘Projected Investment Growth’ would show you how your expected returns would change based on this."}],QUICK_TIP_ProjInvGrow:[{tip:"<strong>Explanation of Growth estimates:</strong><ul><li>All future projections are based on historic returns and cannot be guaranteed.</li><li>Equity fund returns projected at 15.0% annualized.</li><li>Debt fund returns projected at 9.0% annualized.</li><li>All projections are annual, compounded monthly.</li></ul>"},{tip:"<strong>Disclaimer</strong><ul><li>Mutual fund investments are subject to market risks. Please read the offer documents carefully before investing.</li></ul>"}]})}(),function(){"use strict";angular.module("finApp.text",[]).value("appText",{error:{server_error:"Internal server error",no_data:"OOPS! No data found."}})}(),function(){"use strict";function e(e,t){function o(t,o,s){o.on("click",function(){s.clickRedirect&&(e.path(s.clickRedirect),t.$apply())})}var s={link:o,restrict:"EA"};return s}function t(e){return{restrict:"E",replace:!0,templateUrl:"modules/common/views/header.html",link:function(t,o,s){$(".menu,.drawer-overlay,.close-value").on("click",function(){e.drawerAnimate()})}}}function o(e){return{restrict:"E",replace:!0,templateUrl:"modules/common/views/drawer.html",link:function(){$(".close-value").on("click",function(){e.drawerAnimate()}),console.log("$rootScope.title",e.title)}}}function s(){return{restrict:"E",replace:!0,templateUrl:"modules/common/views/partials/loader.html"}}function a(){return{restrict:"EA",require:"ngModel",replace:!1,scope:{type:"@",min:"=",max:"=",formatSymbol:"@",fontColor:"@",yearMax:"@",year:"@",step5:"@"},templateUrl:"modules/common/views/partials/calendar.html",link:function(e,t,o,s){var a=null;s&&(s.$render=function(){if("true"==e.year)if(""==s.$viewValue||void 0==s.$viewValue){var t=new Date,o=t.getFullYear();e.max=o+parseInt(e.yearMax),e.min=o+1,a=e.min,e.model=e.min,s.$setViewValue(e.model)}else{var t=new Date,o=t.getFullYear();e.max=o+parseInt(e.yearMax),e.min=o+1,e.model=s.$viewValue,a=s.$viewValue,s.$setViewValue(e.model)}else e.model=s.$viewValue||0,a=s.$viewValue||0,s.$setViewValue(e.model)},e.doDecrement=function(){var t=parseInt(e.min);t<a?(a="true"==e.step5?+a-5:+a-1,e.model=a,s.$setViewValue(e.model)):(s.$setViewValue(t),a=t,e.model=t)},e.doIncrement=function(){var t=parseInt(e.max);t>a&&(a="true"==e.step5?+a+5:+a+1,e.model=a,s.$setViewValue(e.model))},t.find("input").on("keyup",function(t){var o=$(this).val();o=o.replace(/[^0-9]/g,""),e.model=parseInt(o)||0,a=parseInt(o)||0,a>parseInt(e.max)?(e.model=parseInt(e.max),a=parseInt(e.max)):a<parseInt(e.min)&&(e.model=parseInt(e.min),a=parseInt(e.min)),s.$setViewValue(e.model),e.$apply()}))}}}function i(){return{restrict:"A",require:"ngModel",link:function(e,t,o,s){s.$parsers.unshift(function(e){return e=e.replace(/[^0-9]/g,""),s.$setViewValue(e),s.$render(),e})}}}function n(){return{restrict:"A",require:"ngModel",link:function(e,t,o,s){s.$parsers.unshift(function(e){if(e)return e=e.replace(/[^0-9]/g,""),e>100&&(e/=10,e+=""),s.$setViewValue(e),s.$render(),e})}}}function r(e){return{restrict:"EA",require:"ngModel",scope:{disabled:"=dropdownDisable"},link:function(t,o,s,a){setTimeout(function(){var i=o,n=i.children("option").length;console.log("in link timeout: "+o.id),i.addClass("s-hidden"),i.wrap('<div class="select"></div>'),i.after('<div class="styledSelect"></div>');for(var r=i.next("div.styledSelect"),l=$("<ul />",{class:"options"}).insertAfter(r),c=(e(l)(t),0);c<n;c++)$("<li />",{text:i.children("option").eq(c).text(),rel:i.children("option").eq(c).val()}).appendTo(l),i.children("option").eq(c).val()==a.$viewValue&&(i.children("option").eq(c).attr("selected",!0),r.text(i.children("option[selected]").text()),a.$setViewValue(i.children("option[selected]").val()));var u=i.children("option[selected]");console.log("optSelected: "+u),i.children("option[selected]")&&0!=i.children("option[selected]").length?void 0!=a.$viewValue&&null!=a.$viewValue&&""!=a.$viewValue||(r.text(i.children("option[selected]").text()),a.$setViewValue(i.children("option[selected]").val())):(i.children("option").eq(1).attr("selected",!0),r.text(i.children("option[selected]").text()),a.$setViewValue(i.children("option[selected]").val()));var d=l.children("li");r.click(function(e){e.stopPropagation(),void 0!=t.disabled&&"locked"==t.disabled?(e.stopPropagation(),e.preventDefault()):($(".customSwiper .fin-btn-group").css("z-index",0),$("div.styledSelect.active").each(function(){$(this).removeClass("active").next("ul.options").hide()}),$(this).toggleClass("active").next("ul.options").toggle())}),d.click(function(e){e.stopPropagation(),r.text($(this).text()).removeClass("active"),i.val($(this).attr("rel")),a.$setViewValue($(this).attr("rel")),l.hide(),$(".customSwiper .fin-btn-group").css("z-index",1e3)}),$(document).click(function(){r.removeClass("active"),$(".customSwiper .fin-btn-group").css("z-index",1e3),l.hide()}),parseInt(l.outerHeight())>400&&void 0==s.scrollHeight&&i.parent().find(".options").mCustomScrollbar({setHeight:300,axis:"y"}),void 0!=s.scrollHeight&&i.parent().find(".options").mCustomScrollbar({setHeight:parseInt(s.scrollHeight),axis:"y"}),a.$render=function(){if(!i.children("option[selected]")||0==i.children("option[selected]").length||i.children("option[selected]").val()!=a.$viewValue)for(var e=0;e<n;e++)if(i.children("option").eq(e).val()==a.$viewValue){i.children("option").eq(e).attr("selected",!0),r.text(i.children("option").eq(e).text());break}}},0)}}}function l(){return{restrict:"EA",require:"ngModel",link:function(e,t,o,s){function a(t){var a=t===e.$eval(o.validatePassword);return s.$setValidity("equal",a),a?t:void 0}s&&(s.$parsers.push(a),s.$formatters.push(a))}}}function c(){return{restrict:"EA",require:"ngModel",link:function(e,t,o,s){function a(t){if(t){e.reset=!1;var o=/^(?=.*\d)/.test(t);s.$setValidity("oneNumber",o);var a=/^(?=.*[a-z])/.test(t);s.$setValidity("oneSmall",a);var i=/^[0-9a-zA-Z]{8,}/.test(t);return s.$setValidity("minlength",i),t}e.reset=!0,s.$setValidity("oneNumber",!1),s.$setValidity("oneSmall",!1),s.$setValidity("minlength",!1)}s&&(s.$setValidity("oneNumber",!1),s.$setValidity("oneSmall",!1),s.$setValidity("minlength",!1),e.reset=!0,s.$parsers.push(a),s.$formatters.push(a))}}}function u(){return{restrict:"EA",templateUrl:"modules/common/views/partials/info.html",scope:{quickTipData:"=",infoWidth:"@",className:"@"},link:function(e,t,o){t.find(".infoTip").addClass("hide"),t.find(".info-tip-outer-cover").addClass(e.className),t.find(".infoImage").bind({click:function(){t.find(".infoTip").hasClass("show")?t.find(".infoTip").addClass("bounceOut").removeClass("bounceIn show"):t.find(".infoTip").addClass("show bounceIn").removeClass("hide bounceOut")}})}}}function d(){return{restrict:"EA",templateUrl:"modules/common/views/partials/tip.html",scope:{quickTipData:"="},link:function(e,t,o){t.find(".message").addClass("hide"),t.find(".tip").bind({click:function(){t.find(".message").hasClass("show")?t.find(".message").addClass("bounceOut").removeClass("bounceIn show"):t.find(".message").addClass("show bounceIn").removeClass("hide bounceOut")}})}}}function p(e){return{require:"?ngModel",link:function(t,o,s,a){a&&(a.$formatters.unshift(function(t){return e(s.format)(a.$modelValue)}),a.$parsers.unshift(function(e){if(e){var t=e.replace(/[^\d|\-+|\.+]/g,"");return o.val(parseInt(t).toLocaleString("en-IN")),t}return""}))}}}function h(){return{restrict:"EA",link:function(e,t,o){o.$observe("oneTimeEquity",function(){var e=o.oneTimeEquity,s=1.8*e,a=s-45;t.find(".orbit").css("transform","rotate("+a+"deg)");var i=(t.find(".indicator").position().top,t.find(".indicator").position().left,-a),n="",r="";a>0&&a<90?(n="-12px",r="-38px"):(n="-35px",r="-61px"),t.find("h4").css({top:n,left:r,transform:"rotate("+i+"deg)"})}),o.$observe("calculateGuage",function(){var e=o.calculateGuage,s=1.8*e,a=s-90;t.find(".pointer").css("transform","rotate("+a+"deg)")})}}}function g(e){function t(t,o,s,a){a.$parsers.unshift(function(t){t=t.toUpperCase();var o=/^([A-Z a-z]){5}([0-9]){4}([A-Z a-z]){1}?$/;return 0==o.test(t)?a.$setValidity("invalidPan",!1):(e.verify=!0,a.$setValidity("invalidPan",!0)),""==t&&(e.verify=void 0,a.$setValidity("invalidPan",!0)),a.$setViewValue(t),a.$render(),t})}return{restrict:"A",require:"ngModel",link:t,scope:!0}}function m(e){function t(e,t,o,s){s.$parsers.unshift(function(e){e=e.toUpperCase();var t=/^([A-Z a-z]){4}([0-9]){7}?$/;return 0==t.test(e)?s.$setValidity("invalidIFSC",!1):s.$setValidity("invalidIFSC",!0),""==e&&s.$setValidity("invalidIFSC",!0),s.$setViewValue(e),s.$render(),e})}return{restrict:"A",require:"ngModel",link:t,scope:!0}}function f(e){function t(e,t,o,s){s.$parsers.unshift(function(e){e=e.toUpperCase();var t=/^([0-9]){6}?$/;return 0==t.test(e)?s.$setValidity("invalidPincode",!1):s.$setValidity("invalidPincode",!0),""==e&&s.$setValidity("invalidPincode",!0),s.$setViewValue(e),s.$render(),e})}return{restrict:"A",require:"ngModel",link:t,scope:!0}}function v(){function e(e,t,o,s){var a=$("<div/>",{class:"bubble"});a.appendTo($(".typeSwiper"));for(var i=0;i<e.length;i++){var n=$("<div/>",{class:i==e.length-1?"dot-cover showPseudo":"dot-cover","data-content":i==e.length-1?e.goal:""}),r=$("<div/>",{class:"dot active ani"});r.appendTo(n),n.appendTo(a)}}return{restrict:"E",link:e,scope:{length:"=",goal:"="}}}function y(e){var t=null;return{restrict:"E",template:"<div></div>",scope:{items:"="},link:function(o,s){t=Highcharts.chart(s[0],{chart:{backgroundColor:null,spacingBottom:10,spacingTop:20,spacingLeft:10,spacingRight:10,type:"line",events:{load:function(){var e=parseInt($(".chart-cover").outerWidth()),o=e-100;setTimeout(function(){t.setSize(o,300)},0)}}},title:{text:""},yAxis:{title:{text:""},lineWidth:1},xAxis:{categories:[""],labels:{enabled:!1},tickLength:0},legend:{align:"left"},tooltip:{backgroundColor:"#fdfdfd",borderRadius:10,borderWidth:0,formatter:function(){if(o.calculateAmount(this.y,this.point.date,this.point.xirr,this.point.first_year),"Current Amount"==this.series.name)var e="<h3 class='text-left'>On "+this.point.date+"</h3><br><span class='nextline'><strong>Your Current: </strong> <span class='currency'>₹ </span>"+parseInt(this.y).toLocaleString("en-IN")+"</span><br><span class='nextline'><strong>Your investment:</strong> <span class='currency'>₹ </span>"+parseInt(this.point.y_other).toLocaleString("en-IN")+"</span>";else if("Invested Amount"==this.series.name)var e="<h3 class='text-left'>On "+this.point.date+"</h3><br><span class='nextline'><strong>Your Investment: </strong> <span class='currency'>₹ </span>"+parseInt(this.y).toLocaleString("en-IN")+"</span><br><span class='nextline'><strong>Your current: </strong> <span class='currency'>₹ </span>"+parseInt(this.point.y_other).toLocaleString("en-IN")+"</span>";return e}},plotOptions:{line:{allowPointSelect:!0,cursor:"pointer",marker:{enabled:!1}},series:{states:{hover:{enabled:!1}},turboThreshold:0}},series:o.items}),$(".chart-tabs li").click(function(){for(var e=0;e<o.items.length;e++)t.series[e].update(o.items[e])}),$(window).on("resize",function(){var e=parseInt($(s).parent().outerWidth()),o=e-100;setTimeout(function(){t.setSize(o,300),setTimeout(function(){t.setSize(o,300)},500)},0)}),o.calculateAmount=function(t,o,s,a){if(e.nav={},s&&a){var i=a.split("-"),n=o.split("-"),r=new Date(i[2],i[1]-1,i[0]),l=new Date(n[2],n[1]-1,n[0]),c=Math.abs(l.getTime()-r.getTime()),u=Math.ceil(c/864e5),d=u/365,s=s/100,p=1+s,h=Math.pow(p,d),g=parseInt(1e4*h);e.nav.amount=g}else{var m=1e4*t/100;e.nav.amount=m}e.nav.date=o,e.$$phase||e.$apply()}}}}function A(e){var t=null;return{restrict:"E",template:"<div></div>",scope:{chartoptions:"="},link:function(o,s){t=Highcharts.chart(s[0],{chart:{backgroundColor:null,type:"spline",events:{load:function(){var e=parseInt($(s).parent().outerWidth()),o=e-50;setTimeout(function(){t.setSize(o,300)},100)}}},colors:["#4ea1d2","#aedba0"],legend:!1,credits:{enabled:!1},title:{text:""},xAxis:{categories:o.chartoptions.category,labels:{align:"left"},tickLength:0,tickInterval:o.chartoptions.interval},yAxis:[{opposite:!0,title:{text:""},labels:{enabled:!0,formatter:function(){var t=e("amountSeffix")(this.value);return t}},gridLineWidth:1,gridLineDashStyle:"dash",lineWidth:1}],tooltip:{useHTML:!0,borderWidth:0,borderRadius:10,followTouchMove:!0,shadow:!1,backgroundColor:"rgba(245,245,245,1)",style:{padding:40},formatter:function(){return'<span class="chartTooltip"><span class="chartYear">'+this.x+'</span><span class="nextline content-first"><span class="content">Invested</span><span class="currency">&#8377;</span><span class="amount">'+this.point.invested+'</span></span><span class="nextline content-secound"><span class="content">Projected</span><span class="currency">&#8377;</span><span class="amount">'+this.point.projected+"</span></span></span>"}},plotOptions:{spline:{lineWidth:4,states:{hover:{lineWidth:2,enabled:!0}},allowPointSelect:!0,cursor:"pointer",marker:{enabled:!1}},series:{lineWidth:2,marker:{states:{hover:{enabled:!0,radiusPlus:10,fillColor:"#f9f9f9"}},symbol:"circle"}}},series:o.chartoptions.series}),$(window).on("resize",function(){var e=parseInt($(s).parent().outerWidth()),o=e-50;setTimeout(function(){t.setSize(o,300),setTimeout(function(){t.setSize(o,300)},100)},0)});o.chartoptions||{};o.$watch("chartoptions.title",function(e,o){e&&(t.yAxis[0].setTitle({text:e},!0),t.redraw(),setTimeout(function(){t.yAxis[0].setTitle({text:e},!0),t.redraw()},100))},!0),o.$watch("chartoptions.series",function(e,o){if(e&&e.length==t.series.length){for(var s=0;s<t.series.length;s++)t.series[s].setData(e[s].data,!0);t.redraw()}},!0),o.$watch("chartoptions.category",function(e,o){t.xAxis[0].setCategories(e),t.redraw()},!0),o.$watch("chartoptions.interval",function(e,o){t.xAxis[0].update({tickInterval:e}),t.redraw()},!0)}}}function b(){return{restrict:"EA",scope:{items:"=",title:"=",colors:"="},link:function(e,t){Highcharts.getOptions().colors=Highcharts.map(e.colors,function(e){return{radialGradient:{cx:.6,cy:.3,r:.7},stops:[[0,e],[1,Highcharts.Color(e).brighten(.3).get("rgb")]]}});new Highcharts.Chart(t[0],{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,width:320,height:300,spacingLeft:0},title:{useHTML:!0,text:e.title,align:"center",verticalAlign:"middle",y:-28,x:-18},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+parseFloat(this.percentage).toFixed(0)+" %"}},plotOptions:{pie:{allowPointSelect:!1,cursor:"pointer",shadow:!1,dataLabels:{enabled:!1},borderWidth:0},series:{states:{hover:{enabled:!1}}}},series:[{type:"pie",name:"Browser share",innerSize:"50%",data:e.items}]})}}}function S(e){return{restrict:"EA",scope:{items:"=",title:"=",colors:"="},link:function(e,t,o){e.$watch("colors",function(){Highcharts.getOptions().colors=Highcharts.map(e.colors,function(e){return{radialGradient:{cx:.6,cy:.3,r:.7},stops:[[0,e],[1,Highcharts.Color(e).brighten(.3).get("rgb")]]}})},!0),e.$watch("items",function(){var o=e.items;console.log("items",o);new Highcharts.Chart(t[0],{chart:{backgroundColor:null,plotBorderWidth:null,plotShadow:!1,width:250,height:250,spacingBottom:0,spacingTop:0,spacingLeft:-20,spacingRight:0},title:{useHTML:!0,text:e.title,align:"center",verticalAlign:"middle",y:-5,x:0},tooltip:{formatter:function(){return"<b>"+this.point.name+"</b>: "+parseFloat(this.percentage).toFixed(0)+" %"}},plotOptions:{pie:{allowPointSelect:!1,cursor:"pointer",shadow:!1,dataLabels:{enabled:!1},borderWidth:0},series:{states:{hover:{enabled:!1}}}},series:[{type:"pie",innerSize:"60%",data:o}]})},!0)}}}function _(){return{restrict:"EA",link:function(e,t){$(t).mCustomScrollbar({advanced:{updateOnContentResize:!0,updateOnBrowserResize:!0}}),$(window).on("resize",function(){$(t).mCustomScrollbar("update")})}}}function w(){function e(e,t,o){t.on("shown.bs.collapse",function(e){t.parent().find(".panel-title a").addClass("rotate"),t.parent().find(".panel-title a").text("COLLAPSE")}),t.on("hidden.bs.collapse",function(e){t.parent().find(".panel-title a").removeClass("rotate"),t.parent().find(".panel-title a").text("EXPAND")})}return{restrict:"EA",link:e}}function C(){return{restrict:"EA",templateUrl:"modules/common/views/partials/goalloading.html",scope:{},link:function(e,t,o){t.find(".infoTip").addClass("hide"),t.find(".info-tip-outer-cover").addClass(e.className),t.find(".infoImage").bind({click:function(){t.find(".infoTip").hasClass("show")?t.find(".infoTip").addClass("bounceOut").removeClass("bounceIn show"):t.find(".infoTip").addClass("show bounceIn").removeClass("hide bounceOut")}})}}}function I(){return{restrict:"A",link:function(e,t,o){t.bind("click",function(){angular.element("#"+o.uploadFile).trigger("click")})}}}function k(e){return{restrict:"A",link:function(t,o,s){o.on("change",function(){var t=o[0].files[0],s=document.getElementById("outputVideo"),a=document.getElementById("outputImage"),i=URL.createObjectURL(t);s.src=i;var n=document.createElement("canvas");n.width=100,n.height=75,s.currentTime=10,setTimeout(function(){n.getContext("2d").drawImage(s,0,0,n.width,n.height);var o=document.createElement("img");o.src=n.toDataURL(),console.log(o.src),a.prepend(o),e.capturedFile={blob:t,thumbnail:o.src}},1e3)})}}}function D(e){return{restrict:"A",link:function(t,o,s){var a=videojs(o[0],{controls:!0,width:320,height:240,plugins:{record:{audio:!0,video:!0,maxLength:10,debug:!0,videoMimeType:"video/mp4",maxLength:60}}});a.on("deviceError",function(){console.log("device error:",a.deviceErrorCode)}),a.on("startRecord",function(){console.log("started recording!")}),a.on("finishRecord",function(){e.$apply(function(){var t=document.getElementById("outputVideo"),o=document.getElementById("outputImage");t.src=$(".vjs-tech").attr("src");var s=document.createElement("canvas");s.width=100,s.height=75,t.currentTime=2,setTimeout(function(){s.getContext("2d").drawImage(t,0,0,s.width,s.height);var i=document.createElement("img");i.src=s.toDataURL(),console.log(i.src),o.prepend(i),e.capturedFile={blob:a.recordedData.video,thumbnail:i.src}},1e3)})})}}}function P(e){function t(t,o,s,a){var i=o,n=e.userRiskFactor,r="";n>0&&n<4?(r='<img src= "assets/images/categoryImage1.png" class="img img-responsive" />',E='<span class="text-center">Low Risk</span>'):n>=4.1&&n<=6?(r='<img src= "assets/images/categoryImage3.png" class="img img-responsive" />',E='<span class="text-center">Below Average Risk</span>'):n>=6.1&&n<=7.5?(r='<img src= "assets/images/assesmentCar.png" class="img img-responsive" />',E='<span class="text-center">Average Risk</span>'):n>=7.6&&n<=9?(r='<img src= "assets/images/categoryImage2.png" class="img img-responsive" />',E='<span class="text-center">Above Average Risk</span>'):n>=9.1&&n<=10&&(r='<img src= "assets/images/categoryImage4.png" class="img img-responsive" />',E='<span class="text-center">High Risk</span>'),i.wrap(r)}return console.log("risky"),{restrict:"EA",link:t}}function E(e){function t(t,o,s,a){var i=o,n=e.userRiskFactor,r="";n>0&&n<4?r='<p class="text-center">Low Risk</p>':n>=4.1&&n<=6?r='<p class="text-center">Below Average Risk</p>':n>=6.1&&n<=7.5?r='<p class="text-center">Average Risk</p>':n>=7.6&&n<=9?r='<p class="text-center">Above Average Risk</p>':n>=9.1&&n<=10&&(r='<p class="text-center">High Risk</p>'),i.wrap(r)}return console.log("risky"),{restrict:"EA",link:t}}function V(e,t,o,s){function a(a,i,n){i.on("click",function(){s.show(),o.getFactsheetData(n.showFactsheet).then(function(a){"success"in a&&(t.factsheetData=a.success,o.getHistoricPerformance(n.showFactsheet).then(function(o){s.hide(),"success"in a&&(t.histPerformanceData=o.success,t.factSheetRedirectUrl=e.$$path,e.path("/schemeFactsheet"))}))})})}var i={link:a,restrict:"EA"};return i}function T(e){return{restrict:"EA",link:function(e,t,o){t.bind("keydown keypress",function(e){9===e.which&&e.preventDefault()})}}}function M(e,t,o,s,a){function i(i,n,r){n.on("click",function(){i.noWithdraw=!1,0==t.userFlags.user_flags.show_redeem?(i.errorPopupMessage="You cannot withdraw.",i.ngDialog=a,a.open({template:"modules/common/views/partials/withdraw_error.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:i})):(s.show(),o.getWithdrawDetails().then(function(o){s.hide(),"success"in o&&(o.success.length||(t.noWithdraw=!0),console.log("redeem",o),t.redeemData=o.success,e.path("/withdrawStart"))})),i.gotoPlanning=function(){console.log("hey"),a.closeAll(),e.path("/planInvest")},i.gotoDashboard=function(){a.closeAll(),e.path("/dashboard")}})}var n={link:i,restrict:"EA"};return n}function O(e,t,o,s,a,i,n){function r(s,r,l){r.on("click",function(){t.legends=[];var r=!0;s.takeRegsitration=!1,n().then(function(n){t.userFlags=n.success,0==t.userFlags.user_flags.portfolio?(r=!1,s.errorPopupMessage="You have to add goals before you can invest."):0==t.userFlags.user_flags.vault?(r=!1,s.errorPopupMessage="You need to complete a one-time registration process before you can invest through FinAskUs. Kindly provide the necessary information through Investor Registration.",s.takeRegistration=!0):0==t.userFlags.user_flags.kra_verified&&(r=!1,s.errorPopupMessage="Your KYC verification is in progress, you can only invest after it is completed. We will keep you informed on the status."),0==r&&(s.ngDialog=a,a.open({template:"modules/common/views/partials/invest_error.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:s})),1==r&&o.getInvestDetails().then(function(o){if("success"in o){t.sipTotal=0,t.lumpSumTotal=0,t.overall_total_sum=o.success.overall_total_sum,t.recommended_schemes=o.success.goals_recommended_schemes,t.recommended_schemes.forEach(function(e){t.sipTotal+=e.goal_summary.sip,t.lumpSumTotal+=e.goal_summary.lumpsum}),s.overall_allocation=o.success.overall_allocation,t.resultPercentage=[["Equity",s.overall_allocation.equity.percentage],["Debt",s.overall_allocation.debt.percentage],["ELSS",s.overall_allocation.elss.percentage],["LIQUID",s.overall_allocation.liquid.percentage]],s.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"];for(var a=["#247abc","#05AB41","#7f7f7f","#db5d30"],n=[s.overall_allocation.equity.amount,s.overall_allocation.debt.amount,s.overall_allocation.elss.amount,s.overall_allocation.liquid.amount],r=0;r<t.resultPercentage.length;r++){var l={};l.name=t.resultPercentage[r][0],l.value=t.resultPercentage[r][1],l.price=n.splice(0,1).toString(),l.color=a.splice(0,1).toString(),l.borderColor="10px solid "+l.color,t.legends.push(l)}t.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"],t.pieTitle="<span class='currency'>&#8377;</span><span class='content'><span>"+i("amountSeffix")(t.overall_total_sum)+" </span>",e.path("/investStep1")}}),s.gotoRegistration=function(){a.closeAll(),e.path("/registerInvestorStart")}})})}var l={link:r,restrict:"EA"};return l}angular.module("finApp.directives",[]).directive("clickRedirect",e).directive("finHeader",t).directive("finDrawer",o).directive("finLoader",s).directive("finCalendarForm",a).directive("dropdown",r).directive("onlyNumber",i).directive("onlyPercentage",n).directive("validatePassword",l).directive("checkPassword",c).directive("showTip",d).directive("infoTip",u).directive("format",p).directive("calculateGuage",h).directive("validatePan",g).directive("validateIfsc",m).directive("validatePincode",f).directive("bubbleGen",v).directive("hcChart",y).directive("goalChart",A).directive("investPieChart",b).directive("schemeChart",S).directive("customScrollBar",_).directive("accordian",w).directive("goalLoading",C).directive("uploadFile",I).directive("getFileUploaded",k).directive("captureVideo",D).directive("riskImage",P).directive("riskType",E).directive("showFactsheet",V).directive("disableTab",T).directive("gotoWithdraw",M).directive("gotoInvest",O),e.$inject=["$location","$rootScope"],t.$inject=["$rootScope"],o.$inject=["$rootScope"];r.$inject=["$compile"],u.$inject=[],d.$inject=[],p.$inject=["$filter"],g.$inject=["$rootScope"],m.$inject=["$rootScope"],f.$inject=["$rootScope"],y.$inject=["$rootScope"],A.$inject=["$filter"],S.$inject=["$compile"],C.$inject=[],k.$inject=["$rootScope"],D.$inject=["$rootScope"],P.$inject=["$rootScope"],E.$inject=["$rootScope"],V.$inject=["$location","$rootScope","recommendedService","busyIndicator"],T.$inject=["$rootScope"],M.$inject=["$location","$rootScope","investWithdrawService","busyIndicator","ngDialog"],O.$inject=["$location","$rootScope","investWithdrawService","busyIndicator","ngDialog","$filter","userDetailsService"]}(),function(){"use strict";function e(e,t,o,s,a){return{replace:!1,templateUrl:"modules/common/views/partials/swiper.html",restrict:"EA",scope:{swiperName:"@",swiperNext:"@",swiperPrev:"@",swiperWidth:"@",swiperPage:"@",swiperSection:"@",swiperFallback:"@",indicatorEnd:"@",sendValues:"&callbackFn",result:"="},controller:"@",name:"controllerName",link:function(o,s,i){o.defaultslidesPerView=1,o.defaultspaceBetween=0,o.swiperName=i.swiperName,e.lastSlide=!0,o.step=1;var n=null;setTimeout(function(){n=$(s).find("."+o.swiperName).swiper({direction:"horizontal",slidesPerView:1,loop:!1,simulateTouch:!1,touchMoveStopPropagation:!1,onlyExternal:!0,calculateHeight:!0,nextButton:".content-next",prevButton:".content-prev",breakpoints:{768:{longSwipes:!1,direction:"horizontal",simulateTouch:!1,touchMoveStopPropagation:!1}},onInit:function(t){var i=t.slides.eq(t.activeIndex);if(void 0!=$(i).data("key")){var n=$(i).data("key").split(":");e.tipData=a[n[0]][n[1]]}else e.tipData=void 0;setTimeout(function(){var a=$("."+o.swiperName).outerHeight(!0),n=$(i).find(".swiper-content").outerHeight(!0)+50,r=n-50;$("."+o.swiperName).css("height",r),$("."+o.swiperName+".swiper-wrapper").css("height",r),console.log("main swiper height: "+a+" applyHeight: "+r),a<n?(console.log("main swiper height less "),$(i).css("height",r)):(console.log("main swiper height not less "),$("."+o.swiperName).css("height",r),$(".swiper-slide").css("height",r)),e.$$phase||e.$apply();var l=$("<div/>",{class:"bubble"});l.appendTo($(s).find("."+o.swiperName));for(var c=0;c<t.slides.length;c++){var u=$("<div/>",{class:0==c?"dot-cover showPseudo":"dot-cover","data-content":0==c?"Step 01":""}),d=$("<div/>",{class:0==c?"dot active":"dot"});d.appendTo(u),u.appendTo(l)}e.slideTobeChanged>0&&(t.slideTo(e.slideTobeChanged,0,!0),e.slideTobeChanged=void 0)},500)},onSlideChangeEnd:function(t){e.lastSlide=!0,e.$$phase||e.$apply(),setTimeout(function(){var s=$("."+o.swiperName).outerHeight(!0),i=t.slides.eq(t.activeIndex);if(void 0!=$(i).data("key")&&$(i).data("key").indexOf("calculate")==-1){var n=$(i).data("key").split(":");e.tipData=a[n[0]][n[1]]}else if(void 0!=$(i).data("key")&&$(i).data("key").indexOf("calculate")>-1){var n=$(i).attr("data-key").split(":");o.calculate(n[1],n[2])}else e.tipData=void 0;e.$$phase||e.$apply();var r=$(i).find(".swiper-content").outerHeight(!0)+50,l=r-50;console.log("main swiper height: "+s+" applyHeight: "+l),$("."+o.swiperName).css("height",l),$("."+o.swiperName+".swiper-wrapper").css("height",l),s<r?(console.log("main swiper height less "),$(i).css("height",l)):(console.log("main swiper height not less "),$("."+o.swiperName).css("height",l),$(".swiper-slide").css("height",l)),$("."+o.swiperName+" .dot").removeClass("active"),$("."+o.swiperName+" .bubble .dot-cover").removeClass("showPseudo");for(var c=0;c<=t.slides.length;c++)c<t.activeIndex?($("."+o.swiperName+" .bubble .dot-cover").eq(c).find(".dot").addClass("ani"),$("."+o.swiperName+" .bubble .dot-cover").eq(c).next().find(".dot").addClass("active"),c+1==t.activeIndex&&$("."+o.swiperName+" .bubble .dot-cover").eq(c).next().attr("data-content","Step "+(c+2<10?"0"+(c+2):c+2)).addClass("showPseudo"),t.slides.length-1==t.activeIndex&&($("."+o.swiperName+" .bubble .dot-cover").eq(c).next().attr("data-content",o.indicatorEnd),e.lastSlide=!1,e.$$phase||e.$apply())):($("."+o.swiperName+" .bubble .dot-cover").eq(c).find(".dot").removeClass("ani"),$("."+o.swiperName+" .bubble .dot-cover").eq(0).find(".dot").addClass("active"),0==t.activeIndex&&$("."+o.swiperName+" .bubble .dot-cover").eq(0).addClass("showPseudo"));t.slides.length-1==t.activeIndex&&o.sendValues({data:JSON.stringify(o.currentViewValue)})},500)},onTouchStart:function(e){return console.log("touched"),event.stopPropagation(),!1},onTouchMove:function(e){return console.log("swiper",e),!1},onTouchEnd:function(e){return!0}})},200),$(window).on("resize",function(){n&&n.onResize()}),o.calculate=function(e,t){},o.getStep=function(){var e=1;return n&&(e=n.activeIndex+1),e},o.gotoFirst=function(e){setTimeout(function(){n.slideTo(e,0,!0)},0)},o.gotoMoreQuestion=function(){t.path("riskAssesmentMoreQuestions")},o.appendValues=function(e){o.currentViewValue=e},o.gotToNextSlide=function(){n.slideNext(!0),o.slide=1},o.calculateStep=function(){if(o.slide){var e=n.activeIndex+1;return e+1}return 1}}}}angular.module("finApp.directives").directive("swiper",e),e.$inject=["$rootScope","$location","$compile","$parse","appConfig"]}(),function(){"use strict";function e(){return function(e){var t=0,t=Math.round(e);if(t>=99e5)var o=parseFloat(t/Math.pow(10,7)).toFixed(2)+" Cr";else if(t>=1e3&&t<1e5)var o=t.toLocaleString();else if(t>=1e5&&t<99e5)var o=parseFloat(t/Math.pow(10,5)).toFixed(2)+" L";else var o=t;return o}}function t(){return function(e){var t=e,o="0";return t&&(o=t.toLocaleString("en-IN")),o}}function o(){return function(e){console.log("input",e);var t=0;if(e){var o=e.toString();return t=o.replace("-","")}return t}}function s(){return function(e){var t="";return t="elss"==e?e.toUpperCase():"debt"==e||"equity"==e?e.charAt(0).toUpperCase()+e.slice(1):e}}function a(){return function(e){var t="";if(e){var o=e.substr(e.length-2);if(" K"==o){var s=e.replace(" K","");t=(1e3*s).toLocaleString()}else if(" L"==o||"Cr"==o){var a=parseFloat(e.substr(e,e.length-2));a=a.toFixed(2);var s=a+" "+o;t=s}else t=e}return t}}angular.module("finApp.filters",[]).filter("amountSeffix",e).filter("amountFormat",t).filter("removeNegative",o).filter("backendAmtSuffix",a).filter("capitalizeScheme",s);
}(),function(){"use strict";function e(){return function(e,t){return $.inArray("/"+e.split("/")[1],t)>-1}}function t(e){function t(){e.showLoader=!0,$("body").addClass("disable-scroll")}function o(){e.showLoader=!1,$("body").removeClass("disable-scroll")}return{show:t,hide:o}}function o(e,t,o,s){return function(){var a=t.defer(),i=e(o.API_BASE_URL+"/user/profile/completeness/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?(n(e.response,s),a.resolve({success:e.response})):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}}function s(e,t){return function(){var o="",s="";return e.userFlags&&e.userFlags.user_answers.risk_score&&(o=e.userFlags.user_answers.risk_score),s=o<=4?t.riskProfile.low:o<=6?t.riskProfile.belowAverage:o<=7.5?t.riskProfile.average:o<=8.5?t.riskProfile.aboveAverage:t.riskProfile.high}}function a(e){return function(){var t=$q.defer(),o=$resource(appConfig.API_BASE_URL+"/fileUpload",{},{Check:{method:"POST",transformRequest:function(e){var t=new FormData;return angular.forEach(e,function(e,o){t.append(o,e)}),t}}});return o.Check(e,function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}}function i(e,t,o,s,a,i,n){var r,l={},c=[],u=[],d=["html","less","js","css"],p=[],h=function(t){var a="";return t.headers=t.headers||{},t.data=t.data||{},t.params=t.params||{},r=t.url.replace(i.API_BASE_URL,""),s.userDetails=JSON.parse(sessionStorage.getItem("userDetails"))||{},s.userDetails.user&&(a="undefined"!=s.userDetails.user?JSON.parse(sessionStorage.getItem("tokens")):""),$.inArray(t.url.split(".").pop().split("?")[0].toLowerCase(),d)===-1&&(t.timeout=6e5,$.inArray(r,p)===-1&&(r in c?o.cancel(c[r]):"",r in u?o.cancel(u[r]):"",u[r]=o(function(){},6e5)),console.log("\r\n\r\n******************** BEGIN REQUEST ***************************\r\n"),r.indexOf(i.noTokenAPI)==-1&&s.userDetails.user?(console.log(">>>>>>>>>>>>>>>>>>>>>"+JSON.stringify(a)),a?t.headers.Authorization=a.tokens.token_type+" "+a.tokens.access_token:"",console.log("Time: "+Date()+"\r\n"),console.log("Request: "+JSON.stringify(t.url)+"\r\n"),console.log("Params: "+JSON.stringify(t)+"\r\n"),console.log("******************** END REQUEST *****************************\r\n"+t.data.UserID)):(console.log("Time: "+Date()+"\r\n"),console.log("Request: "+JSON.stringify(t.url)+"\r\n"),console.log("Payload: "+JSON.stringify(t.data)+"\r\n"),console.log("******************** END REQUEST *****************************\r\n"+t.data.UserID))),t||e.when(t)},g=function(t){return r=t.url.split("/").pop().split("?")[0].toLowerCase(),$.inArray(t.url.split(".").pop().split("?")[0].toLowerCase(),d)===-1&&(console.log("\r\n\r\n******************** BEGIN REQUEST ***************************\r\n"),console.log("Time: "+Date()+"\r\n"),console.log("Request: "+JSON.stringify(t.url)+"\r\n"),console.log("Request[ERROR]: "+JSON.stringify(t)+"\r\n"),console.log("******************** END REQUEST *****************************\r\n"),r in c?o.cancel(c[r]):"",r in u?o.cancel(u[r]):""),e.reject(t)},m=function(t){return r=t.config.url.split("/").pop().split("?")[0].toLowerCase(),$.inArray(t.config.url.split(".").pop().split("?")[0].toLowerCase(),d)===-1&&(r in c?o.cancel(c[r]):"",r in u?o.cancel(u[r]):"",console.log("******************** BEGIN RESPONSE ***************************\r\n"),console.log("Response: "+JSON.stringify(t.data)+"\r\n"),console.log("******************** END RESPONSE *****************************\r\n")),t||e.when(t)},f=function(t){return r=t.config.url.split("/").pop().split("?")[0].toLowerCase(),$.inArray(t.config.url.split(".").pop().split("?")[0].toLowerCase(),d)===-1&&(console.log("******************** BEGIN RESPONSE ***************************\r\n"),console.log("Response[ERROR]: "+JSON.stringify(t)+"\r\n"),console.log("******************** END RESPONSE *****************************\r\n"),"401"==t.status&&(sessionStorage.removeItem("userDetails"),$("#sessionLogoutModal").modal("show"),n.hide()),r in c?o.cancel(c[r]):"",r in u?o.cancel(u[r]):""),e.reject(t)};return l.request=h,l.requestError=g,l.response=m,l.responseError=f,l}angular.module("finApp.services",[]).factory("checkPath",e).factory("busyIndicator",t).factory("userDetailsService",o).factory("riskProfileService",s).factory("fileUpload",a).factory("finWebInterCepter",i);var n=function(e,t){sessionStorage.setItem("userFlags",JSON.stringify(e)),t.userFlags=JSON.parse(sessionStorage.getItem("userFlags"))||{},console.log("$rootScope.userFlags",t.userFlags),e.user_answers.risk_score&&(t.userRiskFactor=e.user_answers.risk_score)};t.$inject=["$rootScope"],o.$inject=["$resource","$q","appConfig","$rootScope"],s.$inject=["$rootScope","appConfig"],i.$inject=["$q","$location","$timeout","$rootScope","appText","appConfig","busyIndicator"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r){s.getDashboardDetails(t.userFlags,function(t){e.dashCounts=t}),e.callCompleteness=function(){i().then(function(t){e.userFlags=JSON.parse(sessionStorage.getItem("userFlags"))})},e.callCompleteness();var l=e.userFlags;l.user_answers.risk_score&&(t.userRiskFactor=l.user_answers.risk_score),t.is_bank_supported=l.user_flags.is_bank_supported,e.risk_score=t.userRiskFactor,e.risk_score>0&&e.risk_score<4?e.riskType="Low Risk":e.risk_score>=4.1&&e.risk_score<=6?e.riskType="Below Average Risk":e.risk_score>=6.1&&e.risk_score<=7.5?e.riskType="Average Risk":e.risk_score>=7.6&&e.risk_score<=9?e.riskType="Above Average Risk":e.risk_score>=9.1&&e.risk_score<=10&&(e.riskType="High Risk"),e.user_flags=l.user_flags,e.portfolio_flag=l.user_flags.portfolio,t.showRedeem=l.user_flags.show_redeem,t.disabledTrackPerformance=!1,l.user_flags.is_virtual?parseInt(e.dashCounts.investCount)>0?t.disabledTrackPerformance=!1:t.disabledTrackPerformance=!0:t.disabledTrackPerformance=!1,console.log("risk_score",l.user_answers.risk_score),e.showTrackPerformance=function(){o.path("/trackPerformanceStart")},t.goToWithdraw=function(){e.noWithdraw=!1,0==t.userFlags.user_flags.show_redeem?(e.errorPopupMessage="You cannot withdraw.",e.ngDialog=a,a.open({template:"modules/common/views/partials/withdraw_error.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e})):(r.show(),n.getWithdrawDetails().then(function(e){r.hide(),"success"in e&&(e.success.length||(t.noWithdraw=!0),console.log("redeem",e),t.redeemData=e.success,o.path("/withdrawStart"))}))}}angular.module("finApp.dashboard").controller("dashboardController",e),e.$inject=["$scope","$rootScope","$location","dashboardService","ngDialog","userDetailsService","investWithdrawService","busyIndicator"]}(),function(){"use strict";function e(e,t,o,s,a){function i(e,t){var o={},s=0;for(var a in e.user_answers)null!=e.user_answers[a]&&0!=Object.keys(e.user_answers[a]).length&&"assess"!=a&&(s+=1);s>0?o.investCount=s<10?"0"+s:s:o.investCount=0,o.trackPerform=e.user_flags.track,t(o)}return{getDashboardDetails:i}}angular.module("finApp.dashboard").factory("dashboardService",e),e.$inject=["$resource","$rootScope","appConfig","$q","riskService"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c){e.callCompleteness=function(){n().then(function(t){e.goalAnswered()})},e.callCompleteness(),sessionStorage.removeItem("goalDetailsTemp"),e.startGoalAdd=function(e){t.currentGoal=e,sessionStorage.setItem("currentGoal",t.currentGoal);var s="";s="retirement"==e?e+"GoalsStarted":"event"==e?"othersStarted":e+"Started",o.path("/"+s)},e.goalAnswered=function(){var e=t.userFlags.user_flags;t.goalAnswered={},i.financialGoals.forEach(function(o){console.log("user flags",e[o]),t.goalAnswered[o]=e[o]}),console.log("goalAnswered",t.goalAnswered)},e.deleteGoal=function(t){e.modalErrorMessage="Are you sure you want to delete this goal?",e.currentGoal=t,e.ngDialog=l,l.openConfirm({template:"modules/common/views/partials/confirmText.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e}).then(function(o){e.confirmDeleteGoal(t)},function(e){})},e.confirmDeleteGoal=function(t){l.closeAll(),r.show(),a.deleteParticularGoal(t).then(function(t){r.hide(),"success"in t&&(console.log("Goal deleted successfully"),e.callCompleteness())})},e.goToInvest=function(){t.legends=[];var a=!0;0==t.userFlags.user_flags.portfolio?(a=!1,e.errorPopupMessage="You have to add goals before you can invest."):0==t.userFlags.user_flags.kra_verified?(a=!1,e.errorPopupMessage="You are not KRA verified. Kindly contact FinAskus team."):0==t.userFlags.user_flags.vault&&(a=!1,e.errorPopupMessage="You have to complete investor registration before you can invest"),0==a&&(e.ngDialog=l,l.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e,preCloseCallback:function(){}})),1==a&&c.getInvestDetails().then(function(a){if("success"in a){t.sipTotal=0,t.lumpSumTotal=0,t.overall_total_sum=a.success.overall_total_sum,t.recommended_schemes=a.success.goals_recommended_schemes,t.recommended_schemes.forEach(function(e){t.sipTotal+=e.goal_summary.sip,t.lumpSumTotal+=e.goal_summary.lumpsum}),e.overall_allocation=a.success.overall_allocation,t.resultPercentage=[["Equity",e.overall_allocation.equity.percentage],["Debt",e.overall_allocation.debt.percentage],["ELSS",e.overall_allocation.elss.percentage],["LIQUID",e.overall_allocation.liquid.percentage]];for(var i=["#247abc","#05AB41","#7f7f7f","#db5d30"],n=[e.overall_allocation.equity.amount,e.overall_allocation.debt.amount,e.overall_allocation.elss.amount,e.overall_allocation.liquid.amount],r=0;r<t.resultPercentage.length;r++){var l={};l.name=t.resultPercentage[r][0],l.value=t.resultPercentage[r][1],l.price=n.splice(0,1).toString(),l.color=i.splice(0,1).toString(),l.borderColor="10px solid "+l.color,t.legends.push(l)}t.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"],t.pieTitle="<span class='currency'>&#8377;</span><span class='content'><span>"+s("amountSeffix")(t.overall_total_sum)+" </span>",o.path("/investStep1")}})}}angular.module("finApp.goals").controller("goalsController",e),e.$inject=["$scope","$rootScope","$location","$filter","goalsService","appConfig","userDetailsService","busyIndicator","ngDialog","investWithdrawService"]}(),function(){"use strict";function e(e,t,o,s,a){function i(e){if("undefined"==typeof e||!e)return 0;var t=parseFloat(1/12),o=parseFloat(e/100);return Math.pow(1+o,t)-1}function n(e,t){if("undefined"==typeof e||"undefined"==typeof t||!e||!t)return 0;var s,i,n=e.tenure||0,r=e.corpus||0,l=e.lumpsum||0,u=0;if(t==o.assetAllocationCategory.OnlyEquity||t==o.assetAllocationCategory.OnlyDebt){var d=a.computeAssetAllocation(t,0,l);s=d.assetAllocation,u=c.call(this,n,r,l,s),i=d}else{for(var p=a.getPossibleAssetAllocations(t,0,l)||[],h=0;h<p.length;h++){var s=p[h].assetAllocation;u=c.call(this,n,r,l,s),p[h].computedSIP=u}for(var h=p.length-1;h>=0;h--)if(p[h].computedSIP>=p[h].minSIP){h+1<=p.length-1&&p[h].computedSIP>p[h+1].minSIP?(u=p[h+1].minSIP,s=p[h+1].assetAllocation,i=p[h+1]):(u=p[h].computedSIP,s=p[h].assetAllocation,i=p[h]);break}}return{computedSIP:u,assetAllocation:s,targetAssetAllocationData:i}}function r(e,t,s){if("undefined"==typeof e||!e||"undefined"==typeof t&&"undefined"==typeof s||!t&&!s)return 0;var i=e.tenure||0,n=e.sip||0,r=e.lumpsum||0;if("undefined"==typeof s||!s){var c=a.computeAssetAllocation(t,n,r);s=c.assetAllocation}var u=parseFloat(s.equity),d=parseFloat(s.debt),p=0;s.liquid&&(p=parseFloat(s.liquid));var h=l.call(this,o.returnRate.equity,u,i),g=l.call(this,o.returnRate.debt,d,i),m=p>0?l.call(this,o.returnRate.liquid,p,i):[0,0],f=r*h[0],v=r*g[0],y=r*m[0],A=n*h[1],b=n*g[1],S=n*m[1],_=f+v+y+A+b+S;return{computedCorpus:_,assetAllocation:s}}var l=function(e,t,o){var s=this.getCompoundedMonthlyRate(e),a=o||0,i=12*a,n=parseFloat(1+s),r=parseFloat(t/100),l=Math.pow(n,i),c=r*l,u=r*n*(l-1)/s;return[c,u]},c=function(e,t,s,a){var i=parseFloat(a.equity),n=parseFloat(a.debt),r=l.call(this,o.returnRate.equity,i,e),c=l.call(this,o.returnRate.debt,n,e),u=s*r[0],d=s*c[0],p=r[1],h=c[1],g=(t-u-d)/(p+h);return g=100*Math.ceil(g/100),g=Math.max(g,1e3)};return{getCompoundedMonthlyRate:i,computeSIPForCorpus:n,computeCorpusForSIP:r}}angular.module("finApp.goals").factory("goalFormulaeService",e),e.$inject=["$resource","$rootScope","appConfig","$q","assetAllocationService"]}(),function(){"use strict";function e(e,t,o,s,a,i){function n(){var e=[],t=[{data:[]},{data:[],dashStyle:"ShortDash"}],o=1;return{category:e,series:t,interval:o}}function r(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/answer/delete/"+t+"/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function l(e,t,o,s,n){var r=new Date,l=a("date")(r,"MMMM"),r=r.getFullYear(),c=e.category,u=(e.series[0],e.series[1],0),d=0;c.length=0,c.push(String(r)),n=parseInt(n),o=parseInt(o),s=parseInt(s);var p=[],h=[];d=u=s+o;var g=a("amountSeffix")(u),m=a("amountSeffix")(d);p.push({y:d,invested:g,projected:m}),h.push({y:u,invested:g,projected:m});for(var f=1;f<=n;f++){var v=r+f,u=s+12*f*o,y=i.computeCorpusForSIP({sip:o,lumpsum:s,tenure:f},null,t),d=y.computedCorpus;g=a("amountSeffix")(u),m=a("amountSeffix")(d),c.push(String(v)),p.push({y:d,invested:g,projected:m}),h.push({y:u,invested:g,projected:m})}var A=parseInt(Math.ceil(parseFloat(c.length/8))),b=l+" "+String(r+n);e.series[0].data=p,e.series[1].data=h,e.interval=A,e.toDate=b,e.totalInvestment=u,e.totalProjectedCorpus=d}function c(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/portfolio/goal/"+t+"/recommended/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function u(t,a){var i=s.defer(),n=e(o.API_BASE_URL+"/core/"+a+"/new/response/add/",{},{Check:{method:"POST"}});return n.Check(t,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}return{getGoalGraphDetails:l,addParticularGoal:u,initGoalGraphDetails:n,getFundSelection:c,deleteParticularGoal:r}}function t(e,t,o,s){function a(s){var a=t.defer(),i=e(o.API_BASE_URL+"/core/assetallocation/category/compute/",{},{Check:{method:"GET"}});return i.Check({tenure:s},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function i(e,t,a){var i=s.assetAllocationTables,n={debt:100,equity:0},r=-1,l=0,c=0;if("undefined"!=typeof e&&e&&i.length>0&&e!==o.assetAllocationCategory.OnlyDebt)if(e===o.assetAllocationCategory.OnlyEquity)n={debt:0,equity:100};else{if(r=i.length-1,0!=t||0!=a)for(var u=0;u<i.length;u++)if(t<=i[u].sip_max&&a<=i[u].lumpsum_max){r=u;break}n=i[r].table[e],n=$.extend(!0,{},n),r>0&&(l=i[r-1].sip_max+1,c=i[r-1].lumpsum_max+1)}return n.elss=0,n.liquid=0,{assetAllocation:n,tableIndex:r,minSIP:l,minLumpsum:c}}function n(e,t,a){var i,n=s.assetAllocationTables,r=[],l=0,c=0;if("undefined"!=typeof e&&e&&n.length>0)if(e===o.assetAllocationCategory.OnlyDebt)i={debt:100,equity:0,elss:0,liquid:0},r.push({assetAllocation:i,tableIndex:-1,minSIP:l,minLumpsum:c});else if(e===o.assetAllocationCategory.OnlyEquity)i={debt:0,equity:100,elss:0,liquid:0},r.push({assetAllocation:i,tableIndex:-1,minSIP:l,minLumpsum:c});else{console.log("in possible allocations: "+n.length);for(var u=0;u<n.length;u++)(0==t||t<=n[u].sip_max)&&(0==a||a<=n[u].lumpsum_max)&&(u>0&&(l=n[u-1].sip_max+1,c=n[u-1].lumpsum_max+1),i=n[u].table[e],i=$.extend(!0,{},i),i.elss=0,i.liquid=0,r.push({assetAllocation:i,tableIndex:u,minSIP:l,minLumpsum:c}))}return r}return{computeAssetAllocationCategory:a,computeAssetAllocation:i,getPossibleAssetAllocations:n}}angular.module("finApp.goals").factory("goalsService",e).factory("assetAllocationService",t),e.$inject=["$resource","$rootScope","appConfig","$q","$filter","goalFormulaeService"],t.$inject=["$resource","$q","appConfig","$rootScope"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c){e.withdraw={},t.totalAmt=0,e.withdrawError=0,e.proceedWithdraw=function(t){console.log("modelObj",t);var s={};s.data=[];var a=t.amount,l=t.all_units;if(t.amount){for(var c in a){console.log("amount",a[c]),console.log("goalId",c);var u={};if(u.goal_id=c,console.log("length",Object.keys(a[c]).length),u.amount=[],u.all_units=[],u.cancel_sips=[],a[c])for(var d in a[c])if(a[c][d]>0&&!(l&&l[c]&&l[c][d])){var p={fund_id:d,redeem_amount:a[c][d]};u.amount.push(p)}if(l)for(var d in l[c])if(1==l[c][d]){var h={fund_id:d};u.all_units.push(h)}console.log("result_goal",u),s.data.push(u)}console.log("result Obj",s),n.show(),i.postWithdrawDetails(s).then(function(t){n.hide(),"success"in t?(console.log("data success",t),e.errorPopupMessage="We have received your withdrawal request. Funds will be transferred into your registered bank account once it is processed.",e.confirmShowButton=!1,e.ngDialog=r,r.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e,preCloseCallback:function(){o.path("/dashboard")}})):n.hide()},function(){n.hide()})}else e.disableWithdraw=!0},e.payInvest=function(s){0==t.is_bank_supported?(e.ngDialog=r,e.modalErrorMessage="Thank you for your order request. Please confirm to receive payment instructions.",e.confirmShowButton=!0,r.openConfirm({template:"modules/common/views/partials/confirmText.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e}).then(function(t){i.investBankUnsupported(s).then(function(t){"success"in t&&(e.errorPopupMessage="Your bank is not supported by our payment gateway. You will soon receive an email with payment instructions using other options (Cheque payment).",r.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e,preCloseCallback:function(){o.path("/dashboard")}}))})},function(e){})):(e.modalErrorMessage="You will now be redirected through a secure Payment Gateway (BillDesk) to your bank account.\n\nYour payment will be credited to Indian Clearing Corporation Limited (a Bombay Stock Exchange subsidiary) for your purchase.",e.ngDialog=r,r.openConfirm({template:"modules/common/views/partials/confirmText.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e}).then(function(t){e.confirmPayment(s)},function(e){}))},e.confirmPayment=function(t){n.show(),i.investCheckSum(t).then(function(t){n.hide(),"success"in t&&(console.log("check sum",t.success),e.redirectToPayment(t.success))})},e.redirectToPayment=function(t){e.billdeskData={"X-Requested-With":"",hidRequestId:"PGIME1000",hidOperation:"ME100",msg:t};var o=l('<form action="https://www.billdesk.com/pgidsk/PGIMerchantRequestHandler/" method="POST"><div><input name="X-Requested-With" value="{{billdeskData.X-Requested-With}}" type="hidden"><input name="hidRequestId" value="{{billdeskData.hidRequestId}}" type="hidden"><input name="hidOperation" value="{{billdeskData.hidOperation}}" type="hidden"><input name="msg" value="{{billdeskData.msg}}" type="hidden"></div></form>')(e);jQuery(o).appendTo("body").submit()},e.getPaymentConfirmed=function(){e.txn_amount=parseInt(c.txn_amount),e.message=c.message,e.apiStatus=c.api_status,e.auth_status=c.auth_status,e.order_id=c.order_id},"/investmentReturn"==o.$$path&&e.getPaymentConfirmed(),e.getTotalCurrentValue=function(e){var t=0;return e.funds.forEach(function(e){e.value.forEach(function(e){t=+t+ +e.return_value})}),t},e.getTotal=function(e,o){var s=0;if(e.amount&&o)for(var a in e.amount[o])e.amount[o].hasOwnProperty(a)&&(s=+s+ +e.amount[o][a]);return t.totalAmt=t.totalAmt+s,s},e.validateRedeem=function(t,o,s){var a=s.goal_id;t.fund_id;e.showErrorMessage={};e.showErrorMessage[a];if(t.return_value==o||0==o)e.showErrorMessage[a]="",e.withdrawError=0;else if(o>0&&t.minimum_withdrawal>0&&o<t.minimum_withdrawal){var i="Please enter amount above minimum withdrawal limit ₹ "+t.minimum_withdrawal;e.showErrorMessage[a]=i,e.withdrawError=1}else t.return_value-o<t.minimum_balance?(e.showErrorMessage[a]="The balance after withdrawal cannot be below minimum balance ₹ "+t.minimum_balance,e.withdrawError=1):(e.showErrorMessage[a]="",e.withdrawError=0);return e.showErrorMessage[a]},e.getTotalWithdrawAmt=function(e){var t=0;if(e.amount)for(var o in e.amount)for(var s in e.amount[o]){var a=parseFloat(e.amount[o][s]);0==isNaN(a)&&(t+=a)}return t}}angular.module("finApp.investWithdraw").controller("investWithdrawController",e),e.$inject=["$scope","$rootScope","$location","$filter","$http","investWithdrawService","busyIndicator","ngDialog","$interpolate","$routeParams"]}(),function(){"use strict";function e(e,t,o,s){function a(){}function i(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/review/cart/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function n(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/invested/fund/get/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function r(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/goal/redeem/add/new/",{},{Check:{method:"POST"}});return i.Check(t,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function l(t){var a=s.defer(),i=e(o.API_BASE_URL+"/payment/get/checksum/?txn_amount="+t+"&web=true",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function c(t){var a=s.defer(),i=e(o.API_BASE_URL+"/payment/pay/?txn_amount="+t,{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}return{getPlanDetails:a,getInvestDetails:i,getWithdrawDetails:n,postWithdrawDetails:r,investCheckSum:l,investBankUnsupported:c}}angular.module("finApp.investWithdraw").factory("investWithdrawService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){sessionStorage.removeItem("goalDetailsTemp"),e.getSumValues=function(){jQuery.isEmptyObject(t.userFlags)||(t.is_bank_supported=t.userFlags.user_flags.is_bank_supported,e.quickInvestAmt=t.userFlags.user_answers.invest.lumpsum+12*t.userFlags.user_answers.invest.sip,e.taxAmtInvested=t.userFlags.user_answers.tax.amount_invested,e.liqAmtInvested=t.userFlags.user_answers.liquid.amount_invested)},e.startGoalAdd=function(e){t.currentGoal=e;var s="";t.currentGoal=e,sessionStorage.setItem("currentGoal",t.currentGoal),"invest"==e?s="quickInvestStart":"tax"==e?s="taxsavingStarted":"liquid"==e&&(s="earnInterestStart"),o.path("/"+s)},e.callCompleteness=function(){a().then(function(t){e.goalAnswered(),e.financialGoalAnswered(),e.getSumValues()})},e.callCompleteness(),e.goalAnswered=function(){var e=t.userFlags.user_flags;t.goalExists=!1,t.goalAnswered={},i.otherGoals.forEach(function(o){console.log("user flags",e[o]),t.goalAnswered[o]=e[o],1==t.goalAnswered[o]&&(t.goalExists=!0)}),console.log("goalAnswered",t.goalAnswered)},e.financialGoalAnswered=function(){var e=t.userFlags.user_flags;t.finGoalAnswered="",i.financialGoals.forEach(function(o){1==e[o]&&(t.finGoalAnswered=!0)})},e.getFinancialGoalSum=function(){var e=0;return i.financialGoals.forEach(function(o){if(t.userFlags.user_answers[o]){var s=parseFloat(t.userFlags.user_answers[o].lumpsum||0),a=parseFloat(12*t.userFlags.user_answers[o].sip||0);e+=s+a,console.log("lumpsum",s,"sip",a),console.log("sum",e)}}),e},e.finGoalsAmt=e.getFinancialGoalSum(),e.deleteGoal=function(t){e.modalErrorMessage="Are you sure you want to delete this goal?",e.currentGoal=t,e.ngDialog=r,r.openConfirm({template:"modules/common/views/partials/confirmText.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e}).then(function(o){e.confirmDeleteGoal(t)},function(e){})},e.confirmDeleteGoal=function(o){r.closeAll(),l.show(),n.deleteParticularGoal(o).then(function(o){l.hide(),"success"in o&&(console.log("Goal deleted successfully"),e.callCompleteness(),e.quickInvestAmt=t.userFlags.user_answers.invest.lumpsum+12*t.userFlags.user_answers.invest.sip)})},e.showGoal=function(){t.trackPerTab="FINANCE",o.path("/trackPerformanceStart")},e.goToInvest=function(){t.legends=[];var s=!0;0==t.userFlags.user_flags.portfolio?(s=!1,e.errorPopupMessage="You have to add goals before you can invest.",e.redirectPath="/goals"):0==t.userFlags.user_flags.kra_verified?(s=!1,e.errorPopupMessage="You are not KRA verified. Kindly contact FinAskus team.",e.redirectPath="/dashboard"):0==t.userFlags.user_flags.vault&&(s=!1,e.errorPopupMessage="You have to complete investor registration before you can invest",e.redirectPath="/registerInvestorStart"),0==s&&(e.ngDialog=r,r.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e,preCloseCallback:function(){o.path(e.redirectPath)}})),1==s&&c.getInvestDetails().then(function(s){if("success"in s){t.sipTotal=0,t.lumpSumTotal=0,t.overall_total_sum=s.success.overall_total_sum,t.recommended_schemes=s.success.goals_recommended_schemes,t.recommended_schemes.forEach(function(e){t.sipTotal+=e.goal_summary.sip,t.lumpSumTotal+=e.goal_summary.lumpsum}),e.overall_allocation=s.success.overall_allocation,t.resultPercentage=[["Equity",e.overall_allocation.equity.percentage],["Debt",e.overall_allocation.debt.percentage],["ELSS",e.overall_allocation.elss.percentage],["LIQUID",e.overall_allocation.liquid.percentage]],e.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"];for(var a=["#247abc","#05AB41","#7f7f7f","#db5d30"],i=[e.overall_allocation.equity.amount,e.overall_allocation.debt.amount,e.overall_allocation.elss.amount,e.overall_allocation.liquid.amount],n=0;n<t.resultPercentage.length;n++){var r={};r.name=t.resultPercentage[n][0],r.value=t.resultPercentage[n][1],r.price=i.splice(0,1).toString(),r.color=a.splice(0,1).toString(),r.borderColor="10px solid "+r.color,t.legends.push(r)}t.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"],t.pieTitle="<span class='currency'>&#8377;</span><span class='content'><span>"+u("amountSeffix")(t.overall_total_sum)+" </span>",o.path("/investStep1")}})}}angular.module("finApp.planInvest").controller("planInvestController",e),e.$inject=["$scope","$rootScope","$location","planInvestService","userDetailsService","appConfig","goalsService","ngDialog","busyIndicator","investWithdrawService","$filter"]}(),function(){"use strict";function e(e,t,o,s){function a(){}return{getPlanDetails:a}}angular.module("finApp.planInvest").factory("planInvestService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i){t.registrationStatus={},e.userFlags.user_flags.vault_locked=!0,t.dropdownDisable=!0,t.updateRegistrationStatus=function(){t.registrationStatus.investorInfo&&t.registrationStatus.bankInfo&&t.registrationStatus.identityInfo&&t.registrationStatus.contactInfo&&t.registrationStatus.nomineeInfo?t.registrationStatus.incomplete=!1:t.registrationStatus.incomplete=!0},t.callVideoGet=function(){s.getVideoFile().then(function(o){if("success"in o){var s=o.success;t.hasVideo=s.has_uploaded,e.capturedFile={thumbnail:s.user_video_thumbnail}}else e.capturedFile={thumbnail:""}})},t.callCompleteness=function(){a().then(function(o){t.emailVerified=e.userFlags.user_flags.email_verified,t.phoneVerified=e.userFlags.user_flags.phone_number_verified,t.kycStatus=s.getKYCStatus()})},t.initialize=function(){i.show(),s.getRegistrationStatus().then(function(e){if(i.hide(),"success"in e){var o=e.success;t.registrationStatus={investorInfo:o.is_investor_info,bankInfo:o.is_bank_info,identityInfo:o.is_identity_info,contactInfo:o.is_contact_info,nomineeInfo:o.is_nominee_info},t.updateRegistrationStatus()}},function(){i.hide()}),t.callCompleteness()},t.initialize(),t.saveProcessChoice=function(){s.saveProcessChoice().then(function(e){})}}angular.module("finApp.registerInvestor").controller("registerInvestorController",e),e.$inject=["$rootScope","$scope","$http","registerInvestorService","userDetailsService","busyIndicator"]}(),function(){"use strict";function e(e,t,o,s,a,i){t.modelVal={},t.showVideoPopup=function(){$("#videoCapptureModal").modal("show")},t.done=function(){t.modelVal.videoFile=e.capturedFile.blob,t.modelVal.videoFileThumbnail=e.capturedFile.thumbnail,$("#videoCapptureModal").modal("hide")},t.saveInfo=function(){a.show(),i.saveVideoFile(e.capturedFile.blob,e.capturedFile.thumbnail).then(function(e){a.hide()},function(){a.hide()})}}angular.module("finApp.registerInvestor").controller("registerSelfieController",e),e.$inject=["$rootScope","$scope","$http","$location","busyIndicator","registerInvestorService"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r){t.modelVal={},t.showSigniture=function(){i.isVaultLocked()||$("#signitureModal").modal("show")},t.done=function(){var e=t.accept();t.modelVal.signature=e.dataUrl,$("#signitureModal").modal("hide")},t.shouldShowDeclaration=function(){return!i.isVaultLocked()},t.imageUpload=function(e,o){var s=e.files[0],a=(s.name.substr(s.name.lastIndexOf(".")+1,s.name.length),["jpg","png","jpeg"]);t.Signature="","undefined"==typeof o&&(o="imageUrl"),t.checkImageFile(s,function(i){if(a.indexOf(t.Signature)!=-1){var n=new FileReader;n.onload=function(s){t.$apply(function(t){t.modelVal[o]=s.target.result,t[o]=e.files[0]})},n.readAsDataURL(s)}})},t.checkImageFile=function(e,o){var s=e.slice(0,4),a=new FileReader;a.onloadend=o,a.readAsArrayBuffer(s),a.onload=function(e){var o=new DataView(a.result),s=o.getUint32(0,!1).toString(16);switch(s){case"89504e47":t.Signature="png";break;case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":t.Signature="jpeg"}}},t.getSignature=function(){i.getSignature().then(function(e){"success"in e&&(t.modelVal.signature=e.success.signature)})},t.reviewInfo=function(){s.path(e.redirectUrlContext)},t.showSaveError=function(){t.errorPopupMessage="We encountered a problem trying to save your information. Please try again.",t.ngDialog=r,r.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t})},t.saveInfo=function(){return i.isVaultLocked()?void t.reviewInfo():(a.show(),void i.saveSignature(t.modelVal.signature).then(function(e){"success"in e?i.saveDeclaration(t.modelVal).then(function(e){"success"in e?(a.hide(),n(),i.getKYCStatus()?s.path("/registrationCompleted"):s.path("/completeVideoSelfie")):(a.hide(),t.showSaveError())},function(){a.hide()}):(a.hide(),t.showSaveError())},function(){a.hide(),t.showSaveError()}))},t.getSignature()}angular.module("finApp.registerInvestor").controller("registerSignatureController",e),e.$inject=["$rootScope","$scope","$http","$location","busyIndicator","registerInvestorService","userDetailsService","ngDialog"]}(),function(){"use strict";function e(e,t,o,s){function a(e){var a={signature_data:e},i=s.defer(),n=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function i(e,a){var i=new FormData;i.append("user_video",e),i.append("user_video_thumbnail_data",a);var n=s.defer(),r=t(o.API_BASE_URL+"/user/video/upload/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity
}});return r.Check(i,function(e){200==e.status_code?n.resolve({success:e.response}):n.resolve({Message:e.response.message})},function(e){n.reject(e)}),n.promise}function n(e){var a={is_declaration:e.isDeclaration,is_terms:e.isTerms},i=s.defer(),n=t(o.API_BASE_URL+"/user/is_complete/update/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function r(e){var a={pincode:e},i=s.defer(),n=t(o.API_BASE_URL+"/user/pincode/autocomplete/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function l(){var e={process_choice:"0"},a=s.defer(),i=t(o.API_BASE_URL+"/user/process/set/",{},{Check:{method:"POST"}});return i.Check(e,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function c(){return!(!e.userFlags||!e.userFlags.user_flags)&&e.userFlags.user_flags.kra_verified}function u(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/is_complete/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?e.resolve({success:t.response}):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function d(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/video/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?e.resolve({success:t.response}):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function p(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/signature/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?e.resolve({success:t.response}):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function h(){return!(!e.userFlags||!e.userFlags.user_flags)&&e.userFlags.user_flags.vault_locked}return{lookupPincode:r,getKYCStatus:c,getRegistrationStatus:u,saveSignature:a,getSignature:p,saveVideoFile:i,getVideoFile:d,saveDeclaration:n,saveProcessChoice:l,isVaultLocked:h}}angular.module("finApp.registerInvestor").factory("registerInvestorService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l){this.scope=e,this.rootScope=t,this.location=o,this.userDetailsService=s,this.authService=i,this.registerService=a,this.GoogleSignin=n,this.ngDialog=r;this.scope.completeLogin=angular.bind(this,this.completeLogin),this.scope.completeGoogleLogin=angular.bind(this,this.completeGoogleLogin),this.scope.registerPhone=angular.bind(this,this.registerPhone),this.scope.processGoogleRegister=angular.bind(this,this.processGoogleRegister),this.scope.mergeAccounts=angular.bind(this,this.mergeAccounts),this.scope.cancelGoogleAccountMerge=angular.bind(this,this.cancelGoogleAccountMerge),this.scope.confirmGoogleAccountMerge=angular.bind(this,this.confirmGoogleAccountMerge),this.scope.processGoogleAccountMerge=angular.bind(this,this.processGoogleAccountMerge),this.scope.googleSignIn=angular.bind(this,this.googleSignIn),this.scope.googleRegisterResendOtp=angular.bind(this,this.googleRegisterResendOtp),this.scope.googleRegisterConfirmOtp=angular.bind(this,this.googleRegisterConfirmOtp),e.userRegister=function(t){t&&(t.is_web=!0),a.registerUser(t).then(function(t){"success"in t?(e.succesData=t.success,$("#otpModal").modal("show")):e.signupError=t.Message+" "+t.Error})},e.resendOtp=function(){a.resendOtp(e.succesData.tokens).then(function(e){alert(JSON.stringify(e))})},e.confirmOtp=function(n){a.confirmOtp(n,e.succesData.tokens).then(function(a){"success"in a?($("#otpModal").modal("hide"),setTimeout(function(){i.submitSuccess({success:e.succesData}).then(function(a){s().then(function(s){t.$broadcast("refreshCredentials",s.success),o.path("/dashboard"),e.$$phase||e.$apply()})})},1e3)):e.errorOtp=a.Message})},e.gotoLogin=function(){$("#otpModal").modal("hide"),setTimeout(function(){o.path("/"),e.$$phase||e.$apply()},1e3)},"/settings"==o.$$path&&(l.show(),s().then(function(o){l.hide(),t.userDetails=JSON.parse(sessionStorage.getItem("userDetails"))||{},e.settingsDetails=t.userDetails.user,e.settingsDetails.email_verified=o.success.user_flags.email_verified,e.settingsDetails.phone_number_verified=o.success.user_flags.phone_number_verified,t.userDetails.user.phone_number_verified=e.settingsDetails.phone_number_verified,t.userDetails.user.email_verified=e.settingsDetails.email_verified,sessionStorage.setItem("userDetails",JSON.stringify(t.userDetails))})),e.verify=function(o){if("mobile"==o){t.userDetails.user.phone_number;a.sendOtp().then(function(t){"success"in t&&r.open({template:"modules/registration/views/enter_otp.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e})})}if("email"==o){var s=t.userDetails.user.email;l.show(),a.verifyEmail(s).then(function(o){l.hide(),"success"in o&&(0==o.success.email_verified?(l.show(),a.resendEmailVerify().then(function(t){l.hide(),"success"in t&&(l.hide(),e.errorPopupMessage=t.success.message,e.ngDialog=r,r.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e}))})):1==o.success.email_verified&&(t.userDetails.user.email_verified=!0,e.settingsDetails=t.userDetails.user,sessionStorage.setItem("userDetails",JSON.stringify(t.userDetails))))})}},e.validateOtp=function(o){a.verifyOTP(o).then(function(o){"success"in o?(t.userDetails.user.phone_number_verified=!0,e.settingsDetails=t.userDetails.user,sessionStorage.setItem("userDetails",JSON.stringify(t.userDetails)),r.closeAll()):e.errorOtpSettings=o.Message})},e.enterNewEmail=function(){r.open({template:"modules/registration/views/change_email.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e})},e.changeEmail=function(o){l.show(),a.changeEmail(o).then(function(o){l.hide(),r.closeAll(),"success"in o&&(t.userDetails.user.email=o.success.email,e.settingsDetails=t.userDetails.user,sessionStorage.setItem("userDetails",JSON.stringify(t.userDetails)))})},e.enterNewPassword=function(){r.open({template:"modules/registration/views/change_password.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e})},e.changePassword=function(t,o){a.changePassword(t,o).then(function(t){"success"in t?r.closeAll():e.errorPasswordSettings=t.Message})}}angular.module("finApp.registration").controller("registerController",e),e.$inject=["$scope","$rootScope","$location","userDetailsService","registerService","authService","GoogleSignin","ngDialog","busyIndicator"],e.prototype=finApp.authControllerPrototype}(),function(){"use strict";function e(e,t,o){function s(s){var a=o.defer(),i=e(t.API_BASE_URL+"/user/register/",{},{Check:{method:"POST"}});return i.Check(s,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message,Error:e.error})},function(e){a.reject(e)}),a.promise}function a(s,a){var i={sms_code:parseInt(s.sms_code)},n=o.defer(),r=e(t.API_BASE_URL+"/user/verify/phone/",{},{Check:{method:"POST",headers:{Authorization:a.token_type+" "+a.access_token}}});return r.Check(i,function(e){200==e.status_code?n.resolve({success:e.response}):n.resolve({Message:e.response.message})},function(e){n.reject(e)}),n.promise}function i(s){var a=o.defer(),i=e(t.API_BASE_URL+"/user/resend/verify/phone/",{},{Check:{method:"POST",headers:{Authorization:s.token_type+" "+s.access_token}}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function n(){var s=o.defer(),a=e(t.API_BASE_URL+"/user/resend/verify/phone/",{},{Check:{method:"POST"}});return a.Check({},function(e){200==e.status_code?s.resolve({success:e.response}):s.resolve({Message:e.response.message})},function(e){s.reject(e)}),s.promise}function r(s){var a=o.defer(),i=parseInt(s),n=e(t.API_BASE_URL+"/user/verify/phone/",{},{Check:{method:"POST"}});return n.Check({sms_code:i},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function l(s){var a=o.defer(),i=e(t.API_BASE_URL+"/user/email/status/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function c(){var s=o.defer(),a=e(t.API_BASE_URL+"/user/resend/verify/email/",{},{Check:{method:"POST"}});return a.Check({},function(e){200==e.status_code?s.resolve({success:e.response}):s.resolve({Message:e.response.message})},function(e){s.reject(e)}),s.promise}function u(s){var a=o.defer(),i=e(t.API_BASE_URL+"/user/change/email/",{},{Check:{method:"POST"}});return i.Check({email:s},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function d(s,a){var i=o.defer(),n=e(t.API_BASE_URL+"/user/change/password/",{},{Check:{method:"POST"}});return n.Check({old_password:s,new_password:a},function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}return{registerUser:s,confirmOtp:a,resendOtp:i,verifyEmail:l,resendEmailVerify:c,sendOtp:n,verifyOTP:r,changeEmail:u,changePassword:d}}angular.module("finApp.registration").factory("registerService",e),e.$inject=["$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s){if(t.resultObject="0",t.modelVal={},t.modelVal=o.getAssesmentObject(),t.disableAppend=!0,t.modelVal.A8&&(t.modelVal.noneInvestments=t.modelVal.A8,t.disableAppend=!1),t.appendFormValues=function(s){if("undefined"!=typeof s&&void 0!=s){var a=JSON.parse(s);"op5"==a.noneInvestments&&(a.A8=a.noneInvestments),console.log("data",a),o.setAssesmentObject(a)}var i=o.getAssesmentObject();"op5"==i.noneInvestments&&(i.A8=i.noneInvestments),""==i.noneInvestments&&void 0==i.noneInvestments||delete i.noneInvestments,o.getAssesmentResult(i).then(function(o){"success"in o&&(t.resultObject=Number(o.success.risk_score),e.loggedIn||localStorage.setItem("riskData",JSON.stringify(i)),!jQuery.isEmptyObject(e.userFlags)&&e.userFlags.user_answers&&(e.userFlags.user_answers.assess=i,sessionStorage.setItem("userFlags",JSON.stringify(e.userFlags))),"op5"==i.A8&&(t.modelVal.noneInvestments=i.A8),t.$$phase||t.$apply())}),t.$$phase||t.$apply()},t.past_investments=[{name:"Fixed Deposits",i:"",value:"op1",selected:!1},{name:"Other Fixed Income Products",i:"(PPF, Debt Mutual Funds, etc.)",value:"op2",selected:!1},{name:"Equity Mutual Funds",i:"",value:"op3",selected:!1},{name:"Direct Stocks",i:"",value:"op4",selected:!1}],!jQuery.isEmptyObject(t.modelVal)){var a=new Array;t.selectedValues=new Array,a=t.modelVal.A8.split(","),t.selectedValues=a,t.selectedValues.length&&t.selectedValues.forEach(function(e,o){t.past_investments.forEach(function(t,o){t.value==e&&(t.selected=!0)})})}t.selection=[],t.selectedInvestments=function(){return filterFilter(t.past_investments,{selected:!0})},t.changeInvestments=function(){t.modelVal.noneInvestments=!1,t.$watch("past_investments|filter:{selected:true}",function(e){t.selection=e.map(function(e){return e.value}),t.modelVal.A8=t.selection.join(),t.selection.length<1&&"op5"!=t.modelVal.noneInvestments?t.disableAppend=!0:t.disableAppend=!1},!0)},t.resetInvestments=function(){t.past_investments=[{name:"Fixed Deposits",i:"",value:"op1",selected:!1},{name:"Other Fixed Income Products",i:"(PPF, Debt Mutual Funds, etc.)",value:"op2",selected:!1},{name:"Equity Mutual Funds",i:"",value:"op3",selected:!1},{name:"Direct Stocks",i:"",value:"op4",selected:!1}],t.modelVal.A8="op5",t.modelVal.noneInvestments="op5",t.disableAppend=!1},t.uncheck=function(){console.log("noneInvestments",t.modelVal.A8),"op5"==t.modelVal.noneInvestments?(t.resetInvestments(),t.disableAppend=!1):t.disableAppend=!0}}angular.module("finApp.riskAssesment").controller("riskController",e),e.$inject=["$rootScope","$scope","riskService","$location"]}(),function(){"use strict";function e(e,t,o,s){function a(e){r=angular.copy(e)}function i(){return console.log("userFlags",jQuery.isEmptyObject(e.userFlags)),jQuery.isEmptyObject(e.userFlags)||(r=e.userFlags.user_answers.assess),r}function n(a){var i=s.defer();console.log("$rootScope.loggedIn",e.loggedIn),console.log("$rootScope.action",e.action);var n=e.loggedIn&&"onlyLogin"!=e.action?"/core/assess/new/response/add/":"/core/assess/new/response/",r=t(o.API_BASE_URL+n,{},{Check:{method:"POST"}});return r.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}var r={};return{setAssesmentObject:a,getAssesmentObject:i,getAssesmentResult:n}}angular.module("finApp.riskAssesment").factory("riskService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u,d){t.recommendedSchemesObject={},t.schemeList={},setTimeout(function(){$(".seperate-cover").mCustomScrollbar()},10),e.currentGoal=sessionStorage.getItem("currentGoal"),"/recommendedSchemes"!=n.$$path&&"/compareAndModify"!=n.$$path||(e.subHeader="GO BACK TO "+e.currentGoal.toUpperCase()+" GOAL","liquid"==e.currentGoal?e.redirectURL="/earnInterestStart":"invest"==e.currentGoal?e.redirectURL="/quickInvestStart":"tax"==e.currentGoal?e.redirectURL="/taxsavingStarted":"retirement"==e.currentGoal?e.redirectURL="/retirementGoalsStarted":"event"==e.currentGoal?e.redirectURL="/othersStarted":e.redirectURL="/"+e.currentGoal+"Started"),t.compareAndModify=function(t){e.currentSchemeType=t,n.path("/compareAndModify")},t.getSchemeCount=function(){var o=e.currentGoal,s=e.currentSchemeType;i.show(),a.resetCompareScheme(o,s).then(function(e){"success"in e&&(i.hide(),t.schemeList=e.success,t.otherRecommendSchemes=t.schemeList["other recommended"],t.schemeTop=t.schemeList.scheme,t.schemeListNumber=t.schemeList.scheme.length)})},t.getAllFundsForGoal=function(o){var s=e.currentGoal,i=o;a.getFundsForGoal(s).then(function(e){if("success"in e){t.allFundIds={equity:[],debt:[],elss:[],liquid:[]};for(var o=["debt","elss","equity","liquid"],s=0;s<o.length;s++){var a=o[s],n=e.success[a].scheme;n.forEach(function(e){t.allFundIds[a].push(e.id)})}console.log("$scope.allFundIds",t.allFundIds),console.log("Success data get all funds",e),i in e.success&&(t.schemeList=e.success[i],t.otherRecommendSchemes=t.schemeList["other recommended"],t.schemeTop=t.schemeList.scheme,console.log("$scope.schemeList",t.schemeList))}})},"/compareAndModify"==n.$$path&&(t.getSchemeCount(e.currentSchemeType),t.getAllFundsForGoal(e.currentSchemeType)),"/schemeFactsheet"==n.$$path&&(e.redirectURL=e.factSheetRedirectUrl),t.addToRecommended=function(e,o){t.schemeList.scheme.length>=t.schemeListNumber?(t.shoeSchemeNumberError=1,s(function(){t.shoeSchemeNumberError=!1},3e3)):(t.schemeList.scheme.push(e),t.schemeList["other recommended"].splice(o,1))},t.addToOthers=function(e,o){t.schemeList["other recommended"].push(e);var s=t.schemeList.scheme;s.splice(o,1)},t.validateGoals=function(o){var s=e.currentSchemeType,n=e.currentGoal;t.allFundIds[s]=[],o.forEach(function(e){t.allFundIds[s].push(e.id)}),t.allFundIds[s].length>0&&t.allFundIds[s].length<=t.schemeListNumber&&(i.show(),a.validateCompareModifyScheme(t.allFundIds,n).then(function(e){"success"in e&&1==e.success.valid&&t.saveCompareModifyScheme(t.allFundIds,n)}))},t.saveCompareModifyScheme=function(t,o){a.saveCompareModifyScheme(t,o).then(function(t){"success"in t&&r.getFundSelection(o).then(function(t){"success"in t?(e.setFundData=t.success,n.path("/recommendedSchemes"),i.hide()):console.log(t.Message)})})},t.getFactsheet=function(t){a.getFactsheetData(t).then(function(t){"success"in t&&(e.factsheetData=t.success,n.path("/schemeFactsheet"))})},t.getNumber=function(e){for(var t=new Array,o=0;o<e;o++)t.push(o+1);return t},t.populateGraph=function(e,o){a.getGraphData(e).then(function(e){t.response=e,a.getGraphResultSet(t.response,o).then(function(e){t.resultSet=e,console.log("$scope.resultSet",t.resultSet,"defaultYear",o),t.$$phase||t.$apply()})})},t.selectedSchemes=function(){return filterFilter(t.otherRecommendSchemes,{selected:!0})},t.selectedTop=function(){return filterFilter(t.schemeTop,{selected:!0})},"/compareAndModify"==n.$$path&&t.$watch("otherRecommendSchemes|filter:{selected:true}",function(e){e&&(t.selection=e.map(function(e){return e.id}),t.selectedSchemes=t.selection,console.log("schemes selected",t.selectedSchemes),t.selection.length<1?t.disableAppend=!0:t.disableAppend=!1)},!0),"/compareAndModify"==n.$$path&&t.$watch("schemeTop|filter:{selected:true}",function(e){e&&(t.selection1=e.map(function(e){return e.id}),t.selectedTop=t.selection1,console.log("schemes selected top",t.selectedTop),t.selection.length<1?t.disableAppend=!0:t.disableAppend=!1)},!0),t.compareSchemes=function(t,o){var s=t.concat(o);console.log("finalArray",s),i.show(),a.compareSchemes(s).then(function(t){"success"in t&&(e.schemeCompareAfter=t.success,console.log("$rootScope.schemeCompareAfter",e.schemeCompareAfter),e.ifEquitySchemes=e.schemeCompareAfter.equity_other_data.length>0,e.ifDebtSchemes=e.schemeCompareAfter.debt_other_data.length>0,a.compareSchemesGraph(s).then(function(t){"success"in t&&(i.hide(),e.schemeCompareGraph=t.success,n.path("/schemeCompare"))}))})},t.goToInvest=function(){e.legends=[];var o=!0;d().then(function(s){e.userFlags=s.success,0==e.userFlags.user_flags.portfolio?(o=!1,t.errorPopupMessage="You have to add goals before you can invest.",t.redirectPath="/goals"):0==e.userFlags.user_flags.vault?(o=!1,t.errorPopupMessage="You need to complete Investor Registration before you can invest.",t.redirectPath="/registerInvestorStart"):0==e.userFlags.user_flags.kra_verified&&(o=!1,t.errorPopupMessage="Your KYC verification is in progress, you can only invest once it is completed. Kindly contact FinAskUs Support for any clarifications.",t.redirectPath="/dashboard"),0==o&&(t.ngDialog=u,u.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t,preCloseCallback:function(){n.path(t.redirectPath)}})),1==o&&l.getInvestDetails().then(function(o){if("success"in o){e.sipTotal=0,e.lumpSumTotal=0,e.overall_total_sum=o.success.overall_total_sum,e.recommended_schemes=o.success.goals_recommended_schemes,e.recommended_schemes.forEach(function(t){e.sipTotal+=t.goal_summary.sip,e.lumpSumTotal+=t.goal_summary.lumpsum}),t.overall_allocation=o.success.overall_allocation,e.resultPercentage=[["Equity",t.overall_allocation.equity.percentage],["Debt",t.overall_allocation.debt.percentage],["ELSS",t.overall_allocation.elss.percentage],["LIQUID",t.overall_allocation.liquid.percentage]];for(var s=["#247abc","#05AB41","#7f7f7f","#db5d30"],a=[t.overall_allocation.equity.amount,t.overall_allocation.debt.amount,t.overall_allocation.elss.amount,t.overall_allocation.liquid.amount],i=0;i<e.resultPercentage.length;i++){var r={};r.name=e.resultPercentage[i][0],r.value=e.resultPercentage[i][1],r.price=a.splice(0,1).toString(),r.color=s.splice(0,1).toString(),r.borderColor="10px solid "+r.color,e.legends.push(r)}e.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"],e.pieTitle="<span class='currency'>&#8377;</span><span class='content'><span>"+c("amountSeffix")(e.overall_total_sum)+" </span>",n.path("/investStep1")}})})},t.recommendedSchemesObject=e.setFundData,t.recommendedSchemesObject&&(t.recommendedSchemes=t.recommendedSchemesObject.goals_recommended_schemes[0].recommended_schemes,t.goalSummary=t.recommendedSchemesObject.goals_recommended_schemes[0].goal_summary,t.totalAnnualInvest=t.recommendedSchemesObject.goals_recommended_schemes[0].total_sum,console.log("Recommended Schemes",t.recommendedSchemes))}angular.module("finApp.smartPortFolio").controller("recommendedController",e),e.$inject=["$rootScope","$scope","$http","$timeout","recommendedService","busyIndicator","$location","goalsService","investWithdrawService","$filter","ngDialog","userDetailsService"]}(),function(){"use strict";function e(e,t,o,s){function a(e,t){for(var o=s.defer(),a=e[t].fund,i=e[t].dates,n=["#f23434","#1081c4","#f2692f","#999999","#B3B3B3","#F2F2F2"],r=[],l=0;l<a.length;l++){var c={},u=[],d=a[l].value;if(i.length>d.length){d=a[l].value,i=e[t].dates.slice(0,d.length);for(var p=0;p<d.length;p++)u.push({y:d[p],date:i[p]})}else if(i.length<d.length){i=e[t].dates,d=a[l].value.slice(0,i.length);for(var p=0;p<d.length;p++)u.push({y:d[p],date:i[p]})}else if(i.length==d.length){i=e[t].dates,d=a[l].value;for(var p=0;p<d.length;p++)u.push({y:d[p],date:i[p]})}c.color=n.splice(0,1).toString(),c.name=a[l].id,c.data=u,c.marker={symbol:"square"},r.push(c)}var h={};h.color=n.splice(0,1).toString(),h.name="Benchmark",h.marker={symbol:"square"};for(var g=[],m=0;m<d.length;m++)g.push({y:e[t].index[m],date:i[m]});return h.data=g,r.push(h),o.resolve(r),o.promise}function i(t,a){var i=s.defer(),n=e(o.API_BASE_URL+"/core/reset/goal/"+t+"/?reset="+a,{},{Check:{method:"GET"}});return n.Check({},function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function n(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/funds/goal/"+t+"/get/all/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function r(t,a){var i=s.defer(),n=e(o.API_BASE_URL+"/core/funds/distribution/goal/"+a+"/validate/",{},{Check:{method:"POST"}});return n.Check(t,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function l(t,a){var i=s.defer(),n=e(o.API_BASE_URL+"/core/portfolio/goal/"+a+"/change/",{},{Check:{method:"POST"}});return n.Check(t,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function c(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/"+t+"/schema/fact-sheet/",{},{Check:{method:"GET"}});return i.Check({},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function u(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/fund/historic/performance/",{},{Check:{method:"POST"}});return i.Check({fund_id:t},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function d(e){var t=s.defer();console.log("resultSet",e);var o={three_year:{fund:e.three_year.fund,index:e.three_year.index,dates:e.three_year.dates,category:e.three_year.category},five_year:{fund:e.five_year.fund,index:e.five_year.index,dates:e.five_year.dates,category:e.five_year.category},one_year:{fund:e.one_year.fund,index:e.one_year.index,dates:e.one_year.dates,category:e.one_year.category},three_month:{fund:e.three_month.fund,index:e.three_month.index,dates:e.three_month.dates,category:e.three_month.category},one_month:{fund:e.one_month.fund,index:e.one_month.index,dates:e.one_month.dates,category:e.one_month.category}};return t.resolve(o),t.promise}function p(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/funds/compare/",{},{Check:{method:"POST"}});return i.Check({fund_ids:t},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function h(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/funds/comparison/",{},{Check:{method:"POST"}});return i.Check({fund_id_list:t},function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}return{getGraphResultSet:a,resetCompareScheme:i,getFundsForGoal:n,saveCompareModifyScheme:l,validateCompareModifyScheme:r,getFactsheetData:c,getHistoricPerformance:u,getGraphData:d,compareSchemes:p,compareSchemesGraph:h}}angular.module("finApp.smartPortFolio").factory("recommendedService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r){e.allFunds="",e.trackerDetails="",e.resultSet="",e.setChartValue=t.trackPerTab||"FINANCE",e.getGoalImg=function(e){var t=e.goal_type,o="";switch(t){case"retirement":o="retirement.png";break;case"tax":o="saveTax.png";break;case"invest":o="planInvestMent.png";break;case"vacation":o="vacation.png";break;case"property":o="property.png";break;case"education":o="education.png";break;case"automobile":o="automobile.png";break;case"wedding":o="wedding.png";break;case"jewellery":o="jewellery.svg";break;case"liquid":o="highInterest.png"}return o},e.showFinancialGoalModal=function(t){function o(e){return"retirement"==e.goal_type?e.goal_answers.monthly_investment:e.goal_answers.sip}function s(e){return"tax"==e.goal_type?e.goal_answers.amount_invested:e.goal_answers.lumpsum}e.finGoalsModal=t,e.finGoalsModal.goalImgModal=e.getGoalImg(t),e.finGoalsModal.schemes=e.allSchemes,e.finGoalsModal.sip=o(t),e.finGoalsModal.lumpsum=s(t),$("#finGoalStatusModal").modal("show"),console.log("Modal",e.finGoalsModal)},e.portfolioDetails=function(){r.show(),i.getPortfolioDetails().then(function(t){r.hide(),"success"in t&&(e.allFunds=t.success.asset_class_overview,e.current_portfolio=t.success["current portfolio"],e.dashboardDetails())})},e.dashboardDetails=function(){r.show(),i.getDashboardDetails().then(function(t){if(r.hide(),"success"in t){e.portfolioStatus=t.success.portfolio_overview,e.yestChanges=t.success.yesterday_changes,e.dashboardDate=t.success.date,e.financial_goal_status=t.success.financial_goal_status,e.financial_goal_status.forEach(function(e){var t=new Date(e.date);e.dateFormatted=t;var o=e.goal.substr(e.goal.length-2);if(" K"==o){var s=e.goal.replace(" K","");e.returnGoal=(1e3*s).toLocaleString()}else if(" L"==o||"Cr"==o){var a=parseFloat(e.goal.substr(e.goal,e.goal.length-2));a=a.toFixed(2);var s=a+" "+o;e.returnGoal=s}else e.returnGoal=e.goal}),e.allSchemes=t.success.asset_class_overview,console.log("allFunds",e.allFunds),e.resultPercentage=[],e.allSchemes.forEach(function(t,o){t.funds=e.allFunds[o].value}),console.log("allSchemes",e.allSchemes[0].name);var o=0,s=0,n=0,l=0,c=0,u=0,d=0,p=0;e.allSchemes.forEach(function(e,t){switch(e.name){case"equity":o=e.holding_per,s=e.current_value;break;case"debt":n=e.holding_per,l=e.current_value;break;case"elss":c=e.holding_per,u=e.current_value;break;case"liquid":d=e.holding_per,p=e.current_value}}),e.resultPercentage=[["Equity",o],["Debt",n],["ELSS",c],["LIQUID",d]],console.log("resultPercentage",e.resultPercentage),e.colors=[],e.legendColors=[];for(var h=.2,g=0;g<e.resultPercentage.length;g++){h-=.1;var m=i.getHexcolors("#047ac1",h);e.colors.push(m)}e.colors=["#247abc","#05AB41","#7f7f7f","#db5d30"],console.log("colors",e.colors);var f=a("amountSeffix")(e.current_portfolio.corpus),v=a("removeNegative")(e.current_portfolio.gain),y=e.current_portfolio.is_gain,A="<span>";y||(A='<span class = "highlight">'),e.pieTitle="<p><span class='currency'>&#8377;</span><span class='content'>"+f+"</span><span class='nextline'>Returns "+A+v+"</span>%</span></p>",e.legends=[];for(var h=.2,g=0;g<e.resultPercentage.length;g++){h-=.1;var m=i.getHexcolors("#047ac1",h);e.legendColors.push(m)}e.legendColors=["#247abc","#05AB41","#7f7f7f","#db5d30"];for(var b=[s,l,u,p],g=0;g<e.resultPercentage.length;g++){var S={};S.name=e.resultPercentage[g][0],S.value=e.resultPercentage[g][1],S.price=b.splice(0,1).toString(),S.color=e.legendColors.splice(0,1).toString(),S.borderColor="10px solid "+S.color,e.legends.push(S),console.log("Legends",e.legends)}}})},e.populateGraph=function(t){i.getGraphData(t).then(function(t){e.response=t;var o="three_year";i.getGraphResultSet(e.response,o).then(function(t){e.resultSet=t,console.log("$scope.resultSet",e.resultSet),e.$$phase||e.$apply()})})},e.portfolioTrackerDetails=function(){r.show(),i.getPortfolioTracker().then(function(t){r.hide(),"success"in t&&(e.trackerDetails=t.success,e.populateGraph(e.trackerDetails))})},e.transactionHistoryDetails=function(){r.show(),i.getTransactionHistory().then(function(t){r.hide(),"success"in t&&(e.transactionHistory=t.success,console.log("transactionHistory",e.transactionHistory))})},e.getWidth=function(e){if(e)return{width:e.progress+"%"}},e.portfolioDetails(),e.portfolioTrackerDetails(),e.transactionHistoryDetails(),e.calculateTotalSIP=function(e){var t=0;return e.forEach(function(e){t+=e.agreed_sip}),t},e.calcaulateLumpsum=function(e){var t=0;return e.forEach(function(e){t+=e.agreed_lumpsum}),t},e.checkNegAmt=function(e){if(e<0)return console.log("amt",e),!0}}angular.module("finApp.trackPerformance").controller("trackPerformanceController",e),e.$inject=["$scope","$rootScope","$http","$location","$filter","trackPerformanceService","recommendedService","busyIndicator"]}(),function(){"use strict";function e(e,t,o,s){function a(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var o,s,a="#";for(s=0;s<3;s++)o=parseInt(e.substr(2*s,2),16),o=Math.round(Math.min(Math.max(0,o+o*t),255)).toString(16),a+=("00"+o).substr(o.length);return a}function i(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/portfolio/details/v2/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function n(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/dashboard/v2/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function r(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/portfolio/tracker/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function l(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/leader/board/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function c(){var t=s.defer(),a=e(o.API_BASE_URL+"/core/transaction/history/",{},{Check:{method:"GET"}});return a.Check({},function(e){200==e.status_code?t.resolve({success:e.response}):t.resolve({Message:e.response.message})},function(e){t.reject(e)}),t.promise}function u(e,t){for(var o=s.defer(),a=e[t].fund,i=e[t].dates,n=e[t].xirr,r=e[t].dates[0],l=["#f23434","#1081c4","#f2692f","#999999","#B3B3B3","#F2F2F2"],c=[],u=0;u<a.length;u++){var d={},p=[],h=a[u].value,g=a[u].other_value;if(i.length>h.length){h=a[u].value,g=a[u].other_value,i=e[t].dates.slice(0,h.length),n=e[t].xirr;for(var m=0;m<h.length;m++){var f=+h[m].toFixed(2),v=+g[m].toFixed(2);p.push({y:f,y_other:v,date:i[m],xirr:n[m],first_year:r})}}else if(i.length<h.length){i=e[t].dates,n=e[t].xirr,h=a[u].value.slice(0,i.length),g=a[u].other_value;for(var m=0;m<h.length;m++){var f=+h[m].toFixed(2),v=+g[m].toFixed(2);p.push({y:f,y_other:v,date:i[m],xirr:n[m],first_year:r})}}else if(i.length==h.length){i=e[t].dates,n=e[t].xirr,h=a[u].value,g=a[u].other_value;for(var m=0;m<h.length;m++){var f=+h[m].toFixed(2),v=+g[m].toFixed(2);p.push({y:f,y_other:v,date:i[m],xirr:n[m],first_year:r})}}p.first_year=r,d.color=l.splice(0,1).toString(),d.name=a[u].id,d.data=p,d.marker={symbol:"square"},console.log("object pushed",d),c.push(d)}return o.resolve(c),o.promise}function d(e){var t=s.defer();console.log("resultSet",e);var o={three_year:{fund:[{id:"Current Amount",value:e.current_amount,other_value:e.invested_amount},{id:"Invested Amount",value:e.invested_amount,
other_value:e.current_amount}],dates:e.date,category:[],xirr:e.xirr}};return t.resolve(o),t.promise}return{getHexcolors:a,getPortfolioDetails:i,getDashboardDetails:n,getPortfolioTracker:r,getLeaderBoard:l,getTransactionHistory:c,getGraphData:d,getGraphResultSet:u}}angular.module("finApp.trackPerformance").factory("trackPerformanceService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t){e.when("/automobileStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/automobile/views/automobileStarted.html",controller:"automobileController"}).when("/automobile",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/automobile/views/automobile.html"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/educationStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/education/views/educationStarted.html",controller:"educationController"}).when("/education",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/education/views/education.html",controller:"educationController"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/jewelleryStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/jewellery/views/jewelleryStarted.html",controller:"jewelleryController"}).when("/jewellery",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/jewellery/views/jewellery.html"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/othersStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/others/views/othersStarted.html",controller:"othersController"}).when("/others",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/others/views/others.html",controller:"othersController"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/propertyStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/property/views/propertyStarted.html",controller:"propertyController"}).when("/property",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/property/views/property.html",controller:"propertyController"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/retirementGoalsStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/retirement/views/retirementStarted.html",controller:"retirementGoalsController"}).when("/retirement",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/retirement/views/retirement.html"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/vacationStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/vacation/views/vacationStarted.html",controller:"vacationController"}).when("/vacation",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/vacation/views/vacation.html",controller:"vacationController"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/weddingStarted",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/wedding/views/weddingStarted.html",controller:"weddingController"}).when("/wedding",{title:"Define your Goal",subHeader:"GO BACK TO FINANCIAL GOALS",redirectUrl:"/goals",templateUrl:"modules/goals/modules/wedding/views/wedding.html",controller:"weddingController"})}angular.module("finApp.goals").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/earnInterestStart",{title:"Earn Higher Interest",subHeader:"GO BACK TO PLAN INVESTMENTS",redirectUrl:"/planInvest",templateUrl:"modules/planinvestment/modules/earnInterest/views/earnInterestStart.html",controller:"earnInterestController"}).when("/earnInterest",{title:"Earn Higher Interest",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/modules/earnInterest/views/earnInterest.html"})}angular.module("finApp.planInvest").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/quickInvest",{title:"Quick Invest",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/modules/quickInvest/views/quickIvest.html",controller:"quickInvestController"}).when("/quickInvestStart",{title:"Quick Invest",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/modules/quickInvest/views/quickInvestStart.html",controller:"quickInvestController"})}angular.module("finApp.planInvest").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t){e.when("/taxsaving",{title:"Save Tax",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/modules/taxsaving/views/taxsaving.html",controller:"taxsavingController"}).when("/taxsavingStarted",{title:"Save Tax",subHeader:"GO BACK TO DASHBOARD",redirectUrl:"/dashboard",templateUrl:"modules/planinvestment/modules/taxsaving/views/taxsavingStarted.html",controller:"taxsavingController"})}angular.module("finApp.planInvest").config(e),e.$inject=["$routeProvider","$httpProvider"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){console.log("in controller"),this.scope=e,this.scope.automobile={},this.goalModelObject=this.scope.automobile,this.scope.modelVal=i.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.portfolioFactoring=angular.bind(this,this.portfolioFactoring),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Vehicle goal would mean:</h5><p>Purchasing the vehicle of your choice in future with your selected level of bank loan and additional 5% for accessories</p><h5>How the estimated value is calculated:</h5><ul><li>The current vehicle cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 5% of the future vehicle value is budgeted for any accessories.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Vehicle goal would mean:</h5><p>Purchasing the vehicle of your choice in future with your selected level of bank loan and additional 10% for accessories.</p><h5>How the estimated value is calculated:</h5><ul><li>The current vehicle cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future. </li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 10% of the future vehicle value is budgeted for any accessories.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Vehicle goal would mean:</h5><p>Purchasing the vehicle of your choice in future with your selected level of bank loan and additional 15% for accessories.</p><h5>How the estimated value is calculated:</h5><ul><li>The current vehicle cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 15% of the future vehicle value is budgeted for any accessories.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;e.automobile.tenure||t.getAssetAllocationCategory(),i.getCorpusEstimates(e.automobile.tenure,e.modelVal.A5,e.modelVal.A6,e.modelVal.A7).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.automobile.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.automobile.goal_plan_type&&(t.selectedCriteria="op1")},"/automobileStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionAutomobile=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.current_price=e.A5,a.prop_of_purchase_cost=e.A6,a.amount_saved=e.A7,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),n.addParticularGoal(a,"automobile").then(function(t){"success"in t?(i.setSavedValues(e),console.log("Goal added successfully"),o.getFundData("automobile",u)):console.log("Error in service")})}}angular.module("finApp.goals").controller("automobileController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","automobileService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.automobile,console.log("automobileAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A4=e.sip,r.A5=e.current_price,r.A6=e.prop_of_purchase_cost,r.A7=e.amount_saved||0,r.estimate_selection_type=e.estimate_selection_type,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,r.estimate_selection_type=e.estimate_selection_type,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i,n){var r={term:t,current_price:a,prop_of_purchase_cost:i,amount_saved:n},l=s.defer(),c=e(o.API_BASE_URL+"/core/goal/automobile/estimate/",{},{Check:{method:"GET"}});return c.Check({data:r},function(e){200==e.status_code?l.resolve({success:e.response}):l.resolve({Message:e.response.message})},function(e){l.reject(e)}),l.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("automobileService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){this.scope=e,this.scope.education={},this.goalModelObject=this.scope.education,this.scope.modelVal=n.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=i,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=n,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.scope.portfolioFactoring=angular.bind(this,this.portfolioFactoring),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Education would mean:</h5><p>Education in the selected option with low-cost / government colleges with grant and economic living.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing education options in India and abroad, we estimate the current cost of your chosen education.</li><li>The current cost is projected to grow at the rate of inflation (6% for India and 2% for foreign education) to arrive at the actual cost you will need to bear in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Education would mean:</h5><p>Education in the selected option with an average-cost college and basic living.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing education options in India and abroad, we estimate the current cost of your chosen education.</li><li>The current cost is projected to grow at the rate of inflation (6% for India and 2% for foreign education) to arrive at the actual cost you will need to bear in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Education would mean:</h5><p>Education in the selected option with a high-cost / private college without grant and high standard of living.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing education options in India and abroad, we estimate the current cost of your chosen education.</li><li>The current cost is projected to grow at the rate of inflation (6% for India and 2% for foreign education) to arrive at the actual cost you will need to bear in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;e.education.tenure||t.getAssetAllocationCategory(),n.getCorpusEstimates(e.education.tenure,e.modelVal.A5,e.modelVal.A6,e.modelVal.A7).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.education.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.education.goal_plan_type&&(t.selectedCriteria="op1")},"/educationStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionEducation=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.location=e.A5,a.field=e.A6,a.amount_saved=e.A7,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),i.addParticularGoal(a,"education").then(function(t){"success"in t?(n.setSavedValues(e),console.log("Goal added successfully"),o.getFundData("education",u),u.hide()):console.log("Error in service")})}}angular.module("finApp.goals").controller("educationController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","goalsService","educationService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.education,console.log("educationAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A4=e.sip,r.A5=e.location||"",r.A6=e.field||"",r.A7=e.amount_saved||0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,r.estimate_selection_type=e.estimate_selection_type,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i,n){var r={term:t,location:a,field:i,amount_saved:n},l=s.defer(),c=e(o.API_BASE_URL+"/core/goal/education/estimate/",{},{Check:{method:"GET"}});return c.Check({data:r},function(e){200==e.status_code?l.resolve({success:e.response}):l.resolve({Message:e.response.message})},function(e){l.reject(e)}),l.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("educationService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){console.log("in controller"),this.scope=e,this.scope.jewellery={},this.goalModelObject=this.scope.jewellery,this.scope.modelVal=i.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.portfolioFactoring=angular.bind(this,this.portfolioFactoring),this.rootScope.showPortfolioFactoring=!0,this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Jewellery goal would mean:</h5><p>Purchasing the jewellery of your choice in future with approximate cost of about 80% of your selection.</p><h5>How the estimated value is calculated:</h5><ul><li>The current jewellery cost is projected to grow at 10% based on historic gold inflation to arrive at the actual cost in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Jewellery goal would mean:</h5><p>Purchasing the jewellery of your choice in future with approximate cost the same as your selection.</p><h5>How the estimated value is calculated:</h5><ul><li>The current jewellery cost is projected to grow at 10% based on historic gold inflation to arrive at the actual cost in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Jewellery goal would mean:</h5><p>Purchasing the jewellery of your choice in future with approximate cost about 1.2 times your selection</p><h5>How the estimated value is calculated:</h5><ul><li>The current jewellery cost is projected to grow at 10% based on historic gold inflation to arrive at the actual cost in future.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;i.getCorpusEstimates(e.jewellery.tenure,e.modelVal.A5,e.modelVal.A7).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.jewellery.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.jewellery.goal_plan_type&&(t.selectedCriteria="op1")},"/jewelleryStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionJewellery=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.current_price=e.A5,a.amount_saved=e.A7,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),n.addParticularGoal(a,"jewellery").then(function(t){"success"in t?(i.setSavedValues(e),console.log("Goal added successfully"),o.getFundData("jewellery",u)):console.log("Error in service")})}}angular.module("finApp.goals").controller("jewelleryController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","jewelleryService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.jewellery,console.log("jewelleryAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A4=e.sip,r.A5=e.current_price,r.A7=e.amount_saved||0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,r.estimate_selection_type=e.estimate_selection_type,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i){var n={term:t,current_price:a,amount_saved:i},r=s.defer(),l=e(o.API_BASE_URL+"/core/goal/jewellery/estimate/",{},{Check:{method:"GET"}});return l.Check({data:n},function(e){200==e.status_code?r.resolve({success:e.response}):r.resolve({Message:e.response.message})},function(e){r.reject(e)}),r.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("jewelleryService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){this.scope=e,this.scope.others={},this.goalModelObject=this.scope.others,this.scope.modelVal=i.getSavedValues(),this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.calculateEstimates=function(){},this.scope.fundSelectionEvents=function(e,t){var o=this;console.log("In fund selection",e);var s=new Date,a={};a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_name=e.A1,console.log("fundSelectionObj",a),u.show(),n.addParticularGoal(a,"event").then(function(e){"success"in e?(console.log("Goal added successfully"),o.getFundData("event",u),u.hide()):console.log("Error in service")})}}angular.module("finApp.goals").controller("othersController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","othersService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={},o=new Date;return e=t.userFlags.user_answers.event,console.log("eventsAnswers",e),r.A1=e.goal_name,r.A3=e.corpus,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,r}function i(){}function n(){}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("othersService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){this.scope=e,this.scope.property={},this.goalModelObject=this.scope.property,this.scope.modelVal=i.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},console.log("modelVal",this.scope.modelVal),this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Property goal would mean:</h5><p>Purchasing the property of your choice in future with your selected level of bank loan and additional 5% of property value towards furnishing cost.</p><h5>How the estimated value is calculated:</h5><ul><li>The current property cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 5% of the future property value is budgeted as your furnishing expenses.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"
}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Property goal would mean:</h5><p>Purchasing the property of your choice in future with your selected level of bank loan and additional 10% of property value towards furnishing cost.</p><h5>How the estimated value is calculated:</h5><ul><li>The current property cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 10% of the future property value is budgeted as your furnishing expenses.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Property goal would mean:</h5><p>Purchasing the property of your choice in future with your selected level of bank loan and additional 15% of property value towards furnishing cost.</p><h5>How the estimated value is calculated:</h5><ul><li>The current property cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of bank loan is deducted to estimate how much you will need to fund yourself.</li><li>Additionally 15% of the future property value is budgeted as your furnishing expenses.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;e.property.tenure||t.getAssetAllocationCategory(),i.getCorpusEstimates(e.property.tenure,e.modelVal.A5,e.modelVal.A6,e.modelVal.A7).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.property.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.property.goal_plan_type&&(t.selectedCriteria="op1")},"/propertyStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionProperty=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.current_price=e.A5,a.prop_of_purchase_cost=e.A6,a.amount_saved=e.A7,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),n.addParticularGoal(a,"property").then(function(t){"success"in t?(console.log("Goal added successfully"),i.setSavedValues(e),o.getFundData("property",u),u.hide()):console.log("Error in service")})}}angular.module("finApp.goals").controller("propertyController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","propertyService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.property,console.log("propertyAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A4=e.sip,r.A5=e.current_price,r.A6=e.prop_of_purchase_cost,r.A7=e.amount_saved||0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i,n){var r={term:t,current_price:a,prop_of_purchase_cost:i,amount_saved:n},l=s.defer(),c=e(o.API_BASE_URL+"/core/goal/property/estimate/",{},{Check:{method:"GET"}});return c.Check({data:r},function(e){200==e.status_code?l.resolve({success:e.response}):l.resolve({Message:e.response.message})},function(e){l.reject(e)}),l.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("propertyService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c){e.retirement={},e.modelVal=i.getSavedValues(),""!=e.modelVal.A1&&void 0!=e.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):e.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},t.setFundData={},e.budgetInfoText=[{tip:"<h5>A Budget Retirement would mean:</h5><p>You will get 40% of your current monthly income, adjusted for inflation, every month post retirement. With lower regular expenses, this would imply a somewhat lower lifestyle than you currently maintain.</p><h5>How the estimated value is calculated:</h5><ul><li>Your current income is projected to future value at 6% inflation, and income replacement of 40% is applied.</li><li> Life expectancy is taken as 80 years, or 20 years post retirement, whichever is higher.</li> <li>The total amount required at the time of retirement is calculated, to give you the required monthly income.</li> <li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],e.comfInfoText=[{tip:"<h5>A Comfortable Retirement would mean:</h5><p>You will get 60% of your current monthly income, adjusted for inflation, every month post retirement. With lower regular expenses, this would imply a similar lifestyle as you currently maintain.</p><h5>How the estimated value is calculated:</h5><ul><li>Your current income is projected to future value at 6% inflation, and income replacement of 60% is applied.</li><li>Life expectancy is taken as 80 years, or 20 years post retirement, whichever is higher. </li><li>The total amount required at the time of retirement is calculated, to give you the required monthly income.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],e.luxuInfoText=[{tip:"<h5>A Luxury Retirement would mean:</h5><p>You will get 80% of your current monthly income, adjusted for inflation, every month post retirement. With lower regular expenses, this would imply a somewhat better lifestyle than you currently maintain.</p><h5>How the estimated value is calculated:</h5><ul><li>Your current income is projected to future value at 6% inflation, and income replacement of 80% is applied. </li><li>Life expectancy is taken as 80 years, or 20 years post retirement, whichever is higher.</li><li>The total amount required at the time of retirement is calculated, to give you the required monthly income.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.retirement.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.retirement.goal_plan_type&&(t.selectedCriteria="op1")},"/retirementGoalsStarted"==s.$$path&&e.loadDefaultValues(),e.getGraphObject=function(){return e.graphObject||(e.graphObject=a.initGoalGraphDetails()),e.graphObject},e.graphObject=e.getGraphObject(),e.reloadRoute=function(e){t.selectedCriteria=e,t.$$phase||t.$apply(),t.slideTobeChanged=2,o.reload()},e.sendValues=function(e){console.log("Send values",e),e.goal_plan_type=t.selectedCriteria,i.setSavedValues(e)},e.calculateYear=function(t,o){var s=new Date;e.retirement.calculateYear=s.getFullYear()+(e.modelVal.A3-e.modelVal.A2),e.retirement.tenure=e.modelVal.A3-e.modelVal.A2},e.getAssetAllocationCategory=function(){var t=(new Date,e.retirement.tenure);n.computeAssetAllocationCategory(t).then(function(t){"success"in t?(console.log("Success asset category: "+t.success.asset_allocation_category),e.retirement.assetAllocationCategory=t.success.asset_allocation_category,e.modelVal.assetAllocationCategory=e.retirement.assetAllocationCategory):e.retirement.assetAllocationCategory="A",e.$broadcast("assetAllocationCategoryChanged")}),console.log("$scope.retirement",e.retirement)},e.calculateRecommendedSIP=function(t){var o=function(){var o=r.computeSIPForCorpus({corpus:t,tenure:e.retirement.tenure},e.retirement.assetAllocationCategory),s={};s=e.modelVal.sip&&parseInt(o.computedSIP)==parseInt(e.modelVal.sip)?e.modelVal.assetAllocation:o.assetAllocation,s.equityInitial=o.assetAllocation.equity,e.retirement.perMonth=o.computedSIP,e.retirement.assetAllocation=o.assetAllocation,e.modelVal.A5=e.modelVal.A5||e.retirement.perMonth,e.retirement.corpus=t,console.log("computedSIPData",o),e.setModelVal(s,o.computedSIP)};e.retirement.assetAllocationCategory?o():e.$on("assetAllocationCategoryChanged",o),console.log("$scope.retirement",e.retirement)},e.calculateCorpus=function(t){var o=function(){e.modelVal.estimate_selection_type="",delete e.modelVal.estimate_selection_type;var o=r.computeCorpusForSIP({sip:t,tenure:e.retirement.tenure},e.retirement.assetAllocationCategory);e.retirement.corpus=o.computedCorpus;var s={};s=e.modelVal.corpus&&parseInt(o.computedCorpus)==parseInt(e.modelVal.corpus)?e.modelVal.assetAllocation:o.assetAllocation,s.equityInitial=o.assetAllocation.equity,e.retirement.assetAllocation=s,e.modelVal.A4=parseInt(e.retirement.corpus),console.log("calculateCorpus: "+JSON.stringify(o.assetAllocation)+" corpus: "+o.computedCorpus),e.setModelVal(s,t)};e.modelVal.A5!=e.retirement.perMonth&&(e.retirement.assetAllocationCategory?o():e.$on("assetAllocationCategoryChanged",o),console.log("$scope.retirement",e.retirement))},e.setModelVal=function(o,s){e.sipAmount=s,e.modelVal.assetAllocation=o;var a=o.debt/100*s,i=o.equity/100*s;e.modelVal.debtAmount=a,e.modelVal.equityAmount=i,t.modelValInitial=e.modelVal,e.getGoalGraphDetails()},e.calculateEstimates=function(t,o,s,a){e.retirement.tenure||(e.calculateYear(),e.getAssetAllocationCategory()),i.getCorpusEstimates(t,o,s,a).then(function(s){if("success"in s){console.log("Success goal_estimation: "+s.success.goal_estimation);for(var a=s.success.goal_estimation,i={},n=0;n<a.length;n++){var c=r.computeSIPForCorpus({corpus:a[n].corpus,tenure:o-t},e.retirement.assetAllocationCategory);i[a[n].estimate_type]={corpus:a[n].corpus,sip:c.computedSIP,assetAllocation:c.assetAllocation}}if(e.retirement.goalEstimates=i,""==e.modelVal.estimate_selection_type||void 0==e.modelVal.estimate_selection_type)e.modelVal.estimate_selection_type="",delete e.modelVal.estimate_selection_type,e.noEstimateSelection();else switch(e.modelVal.estimate_selection_type){case"op1":e.estimateSelectionChanged(l.estimateType.BUDGET);break;case"op2":e.estimateSelectionChanged(l.estimateType.COMFORTABLE);break;case"op3":e.estimateSelectionChanged(l.estimateType.LUXURY);break;default:e.estimateSelectionChanged(l.estimateType.COMFORTABLE)}!e.retirement.corpus&&e.modelVal.A5&&e.calculateCorpus(e.modelVal.A5)}})},e.estimateSelectionChanged=function(t,o){e.retirement.goalEstimates[t].sip!=e.modelVal.sip&&"change"!=o?(console.log("not equal"),e.modelVal.estimate_selection_type="",delete e.modelVal.estimate_selection_type,e.retirement.corpus=e.modelVal.corpus):(e.modelVal.A4=e.retirement.goalEstimates[t].corpus,e.modelVal.A5=e.retirement.goalEstimates[t].sip,e.retirement.corpus=e.retirement.goalEstimates[t].corpus,e.retirement.perMonth=e.retirement.goalEstimates[t].sip,e.retirement.assetAllocation=e.retirement.goalEstimates[t].assetAllocation,e.modelVal.sip==e.retirement.goalEstimates[t].sip?e.retirement.assetAllocation=e.modelVal.assetAllocation:e.retirement.assetAllocation=e.retirement.goalEstimates[t].assetAllocation,e.retirement.assetAllocation.equityInitial=e.retirement.goalEstimates[t].assetAllocation.equity,e.setModelVal(e.retirement.assetAllocation,e.retirement.perMonth))},e.noEstimateSelection=function(){console.log("sdfdfsd",e.retirement),e.retirement.perMonth=e.retirement.A5,e.retirement.corpus=e.retirement.corpus,e.modelVal.assetAllocation&&(e.retirement.assetAllocation=e.modelVal.assetAllocation,e.setModelVal(e.retirement.assetAllocation,e.retirement.perMonth))},e.getGoalGraphDetails=function(){a.getGoalGraphDetails(e.graphObject,e.modelVal.assetAllocation,e.modelVal.A5,0,e.retirement.tenure),console.log("$scope.graphObject",e.graphObject)},e.callModel=function(t,o,s){e.amount=s,console.log("called modal"),e.equity=t,e.equity2=o,console.log("$scope.equity",e.equity,"$scope.equity2",e.equity2);var a=Math.round(e.equity/100*s),i=Math.round(e.equity2/100*s);e.debtAmountModal=a,e.equityAmountModal=i,e.minAmount=1e3,$("#equiDeptModal").modal("show")},e.saveEquityDebtMix=function(){console.log("Saved mix"),e.modelVal.assetAllocation.debt=e.equity,e.modelVal.assetAllocation.equity=e.equity2,e.modelVal.debtAmount=e.debtAmountModal,e.modelVal.equityAmount=e.equityAmountModal,$("#equiDeptModal").modal("hide"),e.getGoalGraphDetails()},e.changeDebtModal=function(){console.log("debt",e.equity),e.equity2=100-e.equity,e.debtAmountModal=Math.round(e.equity/100*e.amount),e.equityAmountModal=Math.round(e.equity2/100*e.amount)},e.changeEquityModal=function(){console.log("equity",e.equity2),e.equity=100-e.equity2,e.equityAmountModal=Math.round(e.equity2/100*e.amount),e.debtAmountModal=Math.round(e.equity/100*e.amount)},e.resetAllocation=function(t){e.modelVal.assetAllocation.equity=t,e.modelVal.assetAllocation.debt=100-t,e.modelVal.debtAmount=e.modelVal.assetAllocation.debt/100*e.sipAmount,e.modelVal.equityAmount=e.modelVal.assetAllocation.equity/100*e.sipAmount,e.getGoalGraphDetails(),console.log("modelVal",e.modelVal)},e.fundSelectionRetirement=function(o){console.log("In fund selection",o),console.log("Selected criteria",t.selectedCriteria);var s={};"op1"==t.selectedCriteria&&(s.goal_plan_type=o.goal_plan_type,s.current_age=o.A2,s.floating_sip=!1,s.grow_sip="0",s.monthly_investment=o.A5,s.corpus=o.A4,s.retirement_age=o.A3,s.allocation={debt:o.assetAllocation.debt,equity:o.assetAllocation.equity,elss:"0",liquid:"0"},s.goal_name=o.A1),"op2"==t.selectedCriteria&&(s.goal_plan_type=o.goal_plan_type,s.amount_saved=o.A8,s.estimate_selection_type=o.estimate_selection_type,s.current_age=o.A2,s.floating_sip=!1,s.grow_sip="0",s.monthly_income=o.A6,s.monthly_investment=o.A5,s.corpus=o.A4,s.retirement_age=o.A3,s.allocation={debt:o.assetAllocation.debt,equity:o.assetAllocation.equity,elss:"0",liquid:"0"}),c.show(),i.addRetirementGoal(s).then(function(t){"success"in t?(i.setSavedValues(o),console.log("Goal added successfully"),e.getFundData("retirement")):console.log("Error in service")})},e.getFundData=function(e){a.getFundSelection(e).then(function(e){"success"in e?(c.hide(),t.setFundData=e.success,s.path("/recommendedSchemes")):console.log(e.Message)})}}angular.module("finApp.goals").controller("retirementGoalsController",e),e.$inject=["$scope","$rootScope","$route","$location","goalsService","retirementGoalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"]}(),function(){"use strict";function e(e,t,o,s){function a(){var e={},o={};return e=t.userFlags.user_answers.retirement,o=t.userFlags.user_answers.assess,l.A1=e.goal_name,l.A2=e.current_age||o.A1,l.A3=e.retirement_age,l.A4=e.corpus,l.A6=e.monthly_income,l.A8=e.amount_saved||0,l.estimate_selection_type=e.estimate_selection_type,l.A5=e.monthly_investment,l.sip=e.monthly_investment,l.corpus=e.corpus,l.assetAllocation=e.allocation,l}function i(e){var t={};t=e,sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t){var a=s.defer(),i=e(o.API_BASE_URL+"/core/retirement/new/response/add/",{},{Check:{method:"POST"}});return i.Check(t,function(e){200==e.status_code?a.resolve({success:e.response}):a.resolve({Message:e.response.message})},function(e){a.reject(e)}),a.promise}function r(t,a,i,n){var r={monthly_income:i,amount_saved:n,current_age:t,retirement_age:a},l=s.defer(),c=e(o.API_BASE_URL+"/core/goal/retirement/estimate/",{},{Check:{method:"GET"}});return c.Check({data:r},function(e){200==e.status_code?l.resolve({success:e.response}):l.resolve({Message:e.response.message})},function(e){l.reject(e)}),l.promise}var l={};return{getSavedValues:a,setSavedValues:i,addRetirementGoal:n,getCorpusEstimates:r}}angular.module("finApp.goals").factory("retirementGoalsService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){this.scope=e,this.scope.vacation={},this.goalModelObject=this.scope.vacation,this.scope.modelVal=i.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Vacation goal would mean:</h5><p>Planning the vacation of your choice in future with budget travel and a standard 3-star hotel stay.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing travel and stay options in India and abroad, we estimate the current cost of your chosen vacation.</li><li>The current cost is projected to grow at the rate of inflation (6% for domestic and 2% for international) to arrive at the actual cost you will need to bear in future. </li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Vacation goal would mean:</h5><p>Planning the vacation of your choice in future with economy class air travel and a standard 4-star hotel stay.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing travel and stay options in India and abroad, we estimate the current cost of your chosen vacation.</li><li>The current cost is projected to grow at the rate of inflation (6% for domestic and 2% for international) to arrive at the actual cost you will need to bear in future. </li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Vacation goal would mean:</h5><p>Planning the vacation of your choice in future with business class travel and a standard 5-star hotel stay.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of existing travel and stay options in India and abroad, we estimate the current cost of your chosen vacation.</li><li>The current cost is projected to grow at the rate of inflation (6% for domestic and 2% for international) to arrive at the actual cost you will need to bear in future. </li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;e.vacation.tenure||t.getAssetAllocationCategory(),i.getCorpusEstimates(e.vacation.tenure,e.modelVal.A5,e.modelVal.A6,e.modelVal.A7,e.modelVal.A8).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.vacation.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.vacation.goal_plan_type&&(t.selectedCriteria="op1")},"/vacationStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionVacation=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.number_of_members=e.A5,a.number_of_days=e.A6,a.location=e.A7,a.amount_saved=e.A8,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),n.addParticularGoal(a,"vacation").then(function(t){"success"in t?(i.setSavedValues(e),console.log("Goal added successfully"),o.getFundData("vacation",u)):console.log("Error in service")})}}angular.module("finApp.goals").controller("vacationController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","vacationService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.vacation,console.log("vacationAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A5=e.number_of_members,r.A6=e.number_of_days,r.A7=e.location||"",r.A8=e.amount_saved||0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i,n,r){var l={term:t,number_of_members:a,number_of_days:i,location:n,amount_saved:r},c=s.defer(),u=e(o.API_BASE_URL+"/core/goal/vacation/estimate/",{},{Check:{method:"GET"}});return u.Check({data:l},function(e){200==e.status_code?c.resolve({success:e.response}):c.resolve({Message:e.response.message})},function(e){c.reject(e)}),c.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("vacationService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u){this.scope=e,this.scope.wedding={},this.goalModelObject=this.scope.wedding,this.scope.modelVal=i.getSavedValues(),""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||!sessionStorage.getItem("goalDetailsTemp")?sessionStorage.removeItem("goalDetailsTemp"):this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.noEstimateSelection=angular.bind(this,this.noEstimateSelection),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.budgetInfoText=[{tip:"<h5>A Budget Wedding goal would mean:</h5><p>Planning the wedding of your choice in future with budget catering, venue and decorations, along with low clothing and gifting cost, and budget travel for family if outstation venue.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of the prevailing wedding cost heads, we estimate the current cost of your chosen wedding plan.</li><li>The current cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of wedding expenses is taken into account for cost you will need to bear.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.comfInfoText=[{tip:"<h5>A Comfortable Wedding goal would mean:</h5><p>Planning the wedding of your choice in future with 4-star catering, venue and decorations, along with medium clothing and gifting cost and economy class air travel for family if outstation venue.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of the prevailing wedding cost heads, we estimate the current cost of your chosen wedding plan.</li><li>The current cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of wedding expenses is taken into account for cost you will need to bear.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.luxuInfoText=[{tip:"<h5>A Luxury Wedding goal would mean:</h5><p>Planning the wedding of your choice in future with 5-star catering, venue and decorations, along with luxury clothing and gifting cost and business class air travel for family if outstation venue.</p><h5>How the estimated value is calculated:</h5><ul><li>Based on thorough research of the prevailing wedding cost heads, we estimate the current cost of your chosen wedding plan.</li><li>The current cost is projected to grow at 6% rate of inflation to arrive at the actual cost in future.</li><li>Your choice of proportion of wedding expenses is taken into account for cost you will need to bear.</li><li>Any existing savings for this goal is projected to grow at 8% annually, and reduced from the target amount.</li><li>The monthly savings required is calculated based on projected investment growth.</li></ul>"}],this.scope.calculateEstimates=function(){var t=this;e.wedding.tenure||t.getAssetAllocationCategory(),i.getCorpusEstimates(e.wedding.tenure,e.modelVal.A5,e.modelVal.A6,e.modelVal.A7,e.modelVal.A8).then(t.handleGoalEstimatesResponse)},e.loadDefaultValues=function(){"op2"==t.userFlags.user_answers.wedding.goal_plan_type&&(t.selectedCriteria="op2"),"op1"==t.userFlags.user_answers.wedding.goal_plan_type&&(t.selectedCriteria="op1")},"/weddingStarted"==s.$$path&&e.loadDefaultValues(),this.scope.fundSelectionWedding=function(e){var o=this;console.log("In fund selection",e);var s=new Date,a={};"op1"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj",a)),"op2"==t.selectedCriteria&&(a.corpus=e.A3,a.term=e.A2-s.getFullYear(),a.sip=e.A4,a.lumpsum=0,a.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},a.expected_people=e.A5,a.location=e.A6,a.sharing_percentage=e.A7,a.amount_saved=e.A8,a.estimate_selection_type=e.estimate_selection_type,a.goal_plan_type=t.selectedCriteria,a.goal_name=e.A1,console.log("fundSelectionObj2",a)),u.show(),n.addParticularGoal(a,"wedding").then(function(t){"success"in t?(i.setSavedValues(e),console.log("Goal added successfully"),o.getFundData("wedding",u)):console.log("Error in service")})}}angular.module("finApp.goals").controller("weddingController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","weddingService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};e=t.userFlags.user_answers.wedding,console.log("weddingAnswers",e);var o=new Date;return r.A1=e.goal_name,r.A3=e.corpus,r.A4=e.sip,r.A5=e.expected_people,r.A6=e.location||"",r.A7=e.sharing_percentage,r.A8=e.amount_saved||0,r.assetAllocation=e.allocation,r.sip=e.sip,r.corpus=e.corpus,e.term?r.A2=parseInt(o.getFullYear()+e.term):r.A2=void 0,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(t,a,i,n,r){var l={term:t,expected_people:a,sharing_percentage:n,location:i,amount_saved:r},c=s.defer(),u=e(o.API_BASE_URL+"/core/goal/wedding/estimate/",{},{Check:{method:"GET"}});return u.Check({data:l},function(e){200==e.status_code?c.resolve({success:e.response}):c.resolve({Message:e.response.message})},function(e){c.reject(e)}),c.promise}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.goals").factory("weddingService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u,d,p){this.scope=e,this.scope.earninterest={},this.goalModelObject=this.scope.earninterest,this.scope.modelVal=i.getSavedValues(),""==this.scope.modelVal.A1||void 0==this.scope.modelVal.A1?this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{}:sessionStorage.removeItem("goalDetailsTemp"),this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),
this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.rootScope.showPortfolioFactoring=!0,this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.calculateEstimates=function(){};var h=this;this.getGoalGraphDetails=function(){var e=c.LIQUID_LUMPSUM_TERM;this.goalsService.getGoalGraphDetails(this.scope.graphObject,{equity:0,debt:0,liquid:100},0,this.scope.modelVal.A2||0,e),console.log("$scope.graphObject",this.scope.graphObject)},this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),e.loadDefaultValues=function(){t.userFlags.user_answers.interest.lumpsum?t.selectedCriteria="op2":t.selectedCriteria="op1"},"/quickInvestStart"==s.$$path&&e.loadDefaultValues(),this.scope.getAssetAllocationCategory=function(){var t=(e.modelVal.A3,u());e.earninterest.assetAllocationCategory=c.riskProfileToAssetAllocationCategory[t];var o=r.computeAssetAllocation(e.earninterest.assetAllocationCategory,e.modelVal.A2||0,e.modelVal.A4||0);e.earninterest.assetAllocation=o.assetAllocation,e.modelVal.assetAllocation=o.assetAllocation,h.setModelVal(o.assetAllocation,e.modelVal.A4),h.getGoalGraphDetails()},this.scope.fundSelectionEarnInterest=function(e){console.log("modelVal",e);var t={};t.goal_name=e.A1,t.amount_invested=e.A2,console.log("fundSelectionObj",t),p.show(),n.addParticularGoal(t,"liquid").then(function(t){"success"in t?(i.setSavedValues(e),console.log("Goal added successfully"),h.getFundData("liquid",p)):console.log("Error in service")})}}angular.module("finApp.planInvest").controller("earnInterestController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","earnInterestService","goalsService","assetAllocationService","goalFormulaeService","appConfig","riskProfileService","goalConfig","busyIndicator"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};return e=t.userFlags.user_answers.liquid,console.log("investAnswers",e),n.A1=e.goal_name,n.A2=e.amount_invested,n}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}var n={};return{getSavedValues:a,setSavedValues:i}}angular.module("finApp.planInvest").factory("earnInterestService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u,d,p,h){this.scope=e,this.scope.quickinvest={},this.goalModelObject=this.scope.quickinvest,this.scope.modelVal=i.getSavedValues(),""==this.scope.modelVal.A1||void 0==this.scope.modelVal.A1?this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{}:sessionStorage.removeItem("goalDetailsTemp"),this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.callModel=angular.bind(this,this.callModel),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.rootScope.showPortfolioFactoring=!0,this.scope.changeDebtModal=angular.bind(this,this.changeDebtModal),this.scope.changeEquityModal=angular.bind(this,this.changeEquityModal),this.scope.saveEquityDebtMix=angular.bind(this,this.saveEquityDebtMix),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.resetAllocation=angular.bind(this,this.resetAllocation),this.scope.calculateEstimates=function(){};var g=this;this.getGoalGraphDetails=function(){var o=c.QUICKINVEST_LUMPSUM_TERM;"op1"==t.selectedCriteria?(o=e.quickinvest.tenure,this.goalsService.getGoalGraphDetails(this.scope.graphObject,e.quickinvest.assetAllocation,this.scope.modelVal.A2||0,0,o)):this.goalsService.getGoalGraphDetails(this.scope.graphObject,e.quickinvest.assetAllocation,0,this.scope.modelVal.A4||0,o),console.log("$scope.graphObject",this.scope.graphObject)},this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),e.loadDefaultValues=function(){t.userFlags.user_answers.invest.lumpsum?t.selectedCriteria="op2":t.selectedCriteria="op1"},"/quickInvestStart"==s.$$path&&e.loadDefaultValues(),e.getDefaultGoalName=function(){var e=new Date,t=h("date")(e,"MMM yy");return"My Quick Invest "+t},this.scope.getAssetAllocationCategory=function(){var o=e.modelVal.A3;if(o&&"op1"==t.selectedCriteria)e.quickinvest.tenure=o,r.computeAssetAllocationCategory(o).then(function(t){"success"in t?(console.log("Success asset category: "+t.success.asset_allocation_category),e.quickinvest.assetAllocationCategory=t.success.asset_allocation_category):e.quickinvest.assetAllocationCategory="A";var o=r.computeAssetAllocation(e.quickinvest.assetAllocationCategory,e.modelVal.A2,0);e.quickinvest.assetAllocation=o.assetAllocation,e.modelVal.assetAllocation=o.assetAllocation,e.modelVal.assetAllocation.equityInitial=o.assetAllocation.equity,g.setModelVal(o.assetAllocation,e.modelVal.A2),g.getGoalGraphDetails(),e.$broadcast("assetAllocationCategoryChanged")});else{var s=u();e.quickinvest.assetAllocationCategory=c.riskProfileToAssetAllocationCategory[s];var a=r.computeAssetAllocation(e.quickinvest.assetAllocationCategory,0,e.modelVal.A4||0);e.quickinvest.assetAllocation=a.assetAllocation,e.modelVal.assetAllocation=a.assetAllocation,e.modelVal.assetAllocation.equityInitial=a.assetAllocation.equity,g.setModelVal(a.assetAllocation,e.modelVal.A4),g.getGoalGraphDetails()}},this.scope.fundSelectionQuickInvest=function(e){var o=this;console.log("In fund selection",e);var s=(new Date,{});"op1"==t.selectedCriteria&&(s.term=e.A3,s.sip=e.A2,s.lumpsum=0,s.floating_sip=!1,s.grow_sip=0,s.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},s.goal_name=e.A1),"op2"==t.selectedCriteria&&(s.term=0,s.sip=0,s.lumpsum=e.A4,s.floating_sip=!1,s.grow_sip=0,s.allocation={debt:e.assetAllocation.debt,equity:e.assetAllocation.equity,elss:"0",liquid:"0"},s.goal_name=e.A1),console.log("fundSelectionObj",s),p.show(),n.addParticularGoal(s,"invest").then(function(t){"success"in t?(console.log("Goal added successfully"),i.setSavedValues(e),o.getFundData("invest",p),p.hide()):console.log("Error in service")})}}angular.module("finApp.planInvest").controller("quickInvestController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","quickInvestService","goalsService","assetAllocationService","goalFormulaeService","appConfig","riskProfileService","goalConfig","busyIndicator","$filter"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e={};return e=t.userFlags.user_answers.invest,console.log("investAnswers",e),r.A1=e.goal_name,r.A2=e.sip,r.A3=e.term,r.A4=e.lumpsum,r}function i(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}function n(){}var r={};return{getSavedValues:a,setSavedValues:i,getCorpusEstimates:n}}angular.module("finApp.planInvest").factory("quickInvestService",e),e.$inject=["$resource","$rootScope","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c,u,d){this.scope=e,this.scope.taxsaving={},this.goalModelObject=this.scope.taxsaving,this.scope.modelVal=JSON.parse(sessionStorage.getItem("goalDetailsTemp"))||{},""!=this.scope.modelVal.A1&&void 0!=this.scope.modelVal.A1||(this.scope.modelVal=i.getSavedValues()),this.rootScope=t,this.route=o,this.location=s,this.timeout=a,this.goalsService=n,this.assetAllocationService=r,this.goalFormulaeService=l,this.appConfig=c,this.goalTypeService=i,this.scope.showEquityModal=angular.bind(this,this.showEquityModal),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.appendValues=angular.bind(this,this.appendValues),this.scope.getAssetAllocationCategory=angular.bind(this,this.getAssetAllocationCategory),this.scope.calculateRecommendedSIP=angular.bind(this,this.calculateRecommendedSIP),this.scope.calculateCorpus=angular.bind(this,this.calculateCorpus),this.scope.estimateSelectionChanged=angular.bind(this,this.estimateSelectionChanged),this.scope.handleGoalEstimatesResponse=angular.bind(this,this.handleGoalEstimatesResponse),this.rootScope.showPortfolioFactoring=!0,this.scope.taxsaving.assetAllocation=c.TAX_DEFAULT_ALLOCATION,this.scope.getGraphObject=angular.bind(this,this.getGraphObject),this.scope.graphObject=this.scope.getGraphObject(),this.scope.getFundData=angular.bind(this,this.getFundData),this.scope.infoProjTaxSaving=[{tip:"<strong>Equity Linked Saving Schemes (ELSS): </strong>are those mutual fund schemes that invest in equities / stock markets with a 3-year lock-in period, and are eligible for tax deduction from your income under Section 80C of the Income Tax Act 1961.<ul><li>You can invest up to <span class=currency>&#8377</span> 1.5 lakhs u/s 80C, and save up to <span class=currency>&#8377</span> 46,350 on your taxes (subject to individual tax slab).</li><li>ELSS returns are typically higher than other tax saving options over the long term (projected at 15% annualized, ideally for investment duration > 5 years), but they carry the risk of equity markets and can fluctuate in the short term.</li><li>ELSS offers one of the lowest lock-in period of 3 years compared to other tax saving instruments.</li></ul>"}],this.scope.infoProjInvGrowth=[{tip:"<strong>Explanation of Growth estimates:</strong><ul><li>All future projections are based on historic returns and cannot be guaranteed.</li><li>ELSS fund returns projected at 15.0% annualized.</li><li>All projections are annual, compounded monthly.</li></ul><strong>Disclaimer:</strong><ul><li>Mutual fund investments are subject to market risks. Please read the offer documents carefully before investing.</li></ul>"}],this.rootScope.tipData=[{tip:""}];var p=this;this.getGoalGraphDetails=function(){var e=c.TAX_TERM;this.goalsService.getGoalGraphDetails(this.scope.graphObject,{equity:100,debt:0},0,this.scope.modelVal.A2||0,e),console.log("$scope.graphObject",this.scope.graphObject)},this.scope.getGoalGraphDetails=angular.bind(this,this.getGoalGraphDetails),this.scope.initOptions=function(){this.rootScope.selectedCriteria="op1"},this.scope.calculateEstimates=function(){},e.getDefaultGoalName=function(){var e=new Date,e=d("date")(e,"yy"),t=+e+1;return"My Tax Plan FY"+e+"-"+t},this.scope.computeFutureEligibility=function(){var t=parseFloat(e.modelVal.A3||0),o=parseFloat(e.modelVal.A4||0),s=parseFloat(e.modelVal.A5||0),a=parseFloat(e.modelVal.A6||0),i=15e4-(t+o+s+a);i=Math.max(i,0),e.taxsaving.eligibility=e.modelVal.A2=i,e.computeTaxBenefit()},this.scope.computeTaxBenefit=function(){var t=e.modelVal.A2||0,o=Math.round(30.9*t/100);e.taxsaving.taxBenefit=o,p.getGoalGraphDetails()},"op2"==this.rootScope.selectedCriteria&&e.computeFutureEligibility(),this.scope.fundSelectionSaveTax=function(e){console.log("modelVal",e);var t={};t.estimate_needed=e.A3?"op2":"op1",t.pff=e.A3||0,t.insurance=e.A4||0,t.loan=e.A5||0,t.elss=e.A6||0,t.amount_allowed="150000",t.amount_invested=e.A2,console.log("fundSelectionObj",t),u.show(),n.addParticularGoal(t,"tax").then(function(t){"success"in t?(console.log("Goal added successfully"),i.setSavedValues(e),p.getFundData("tax",u)):console.log("Error in service")})}}angular.module("finApp.planInvest").controller("taxsavingController",e),e.$inject=["$scope","$rootScope","$route","$location","$timeout","taxsavingService","goalsService","assetAllocationService","goalFormulaeService","appConfig","busyIndicator","$filter"],e.prototype=finApp.goalControllerPrototype}(),function(){"use strict";function e(e,t,o,s,a){function i(){var e={};return e=t.userFlags.user_answers.tax,console.log("taxSavingAnswers",e),r.A2=e.amount_invested,r.A3=e.pff,r.A4=e.insurance,r.A5=e.loan,r.A6=e.elss,r.A1=e.goal_name,"op2"==e.estimate_needed&&(t.selectedCriteria="op2"),r}function n(e){var t={},t=e;sessionStorage.setItem("goalDetailsTemp",JSON.stringify(t))}var r={};return{getSavedValues:i,setSavedValues:n}}angular.module("finApp.planInvest").factory("taxsavingService",e),e.$inject=["$resource","$rootScope","appConfig","$q","$route"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c){this.scope=t,this.scope.modelVal={},this.rootScope=e,this.route=o,this.location=a,this.timeout=i,this.busyIndicator=l,this.registerInvestorService=n,this.ngDialog=c,this.service=r,this.scope.is_acc_supported=!0;this.initialize(),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.saveInfo=angular.bind(this,this.saveInfo),this.scope.appendValue=angular.bind(this,this.appendValue),this.scope.imageUpload=angular.bind(this,this.imageUpload),this.scope.checkImageFile=angular.bind(this,this.checkImageFile),this.scope.uploadFileToServer=angular.bind(this,this.uploadFileToServer),this.lookupIFSCCode=function(){var o=this;o.busyIndicator.show(),this.service.lookupIFSCCode(this.scope.modelVal.ifscCode).then(function(s){o.busyIndicator.hide(),"success"in s&&(angular.extend(o.scope.modelVal,s.success),e.is_bank_supported=s.success.bank_supported,0==s.success.bank_supported&&(t.errorPopupMessage="Your bank is not supported by our payment gateway. \nYou can change your bank or you will guided to other payment options (Cheque payment).",t.ngDialog=c,c.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t})))},function(){o.busyIndicator.hide()})},this.lookupAccNum=function(){console.log("acc num");var e=this;e.busyIndicator.show(),this.service.lookupAccNum(this.scope.modelVal).then(function(t){e.busyIndicator.hide(),"Message"in t?(e.scope.is_acc_supported=!1,e.scope.errorPopupMessage=t.Message,e.scope.ngDialog=c,c.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:e.scope})):"success"in t&&(e.scope.is_acc_supported=!0)},function(){e.busyIndicator.hide()})},this.scope.lookupIFSCCode=angular.bind(this,this.lookupIFSCCode),this.scope.lookupAccNum=angular.bind(this,this.lookupAccNum)}angular.module("finApp.registerInvestor").controller("bankInfoController",e),e.$inject=["$rootScope","$scope","$route","$http","$location","$timeout","registerInvestorService","bankInfoService","busyIndicator","ngDialog"],e.prototype=finApp.registerInvestorControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/investor/account/info/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){if(200==t.status_code)p(t.response),e.resolve({success:u});else{i();e.resolve({Message:t.response.message})}},function(t){e.reject(t)}),e.promise}function i(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/investor/info/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?(u.accountHolderName=t.response.applicant_name,e.resolve({success:t.response})):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function n(e){if("undefined"!=typeof e&&e){u=e;var a=d(),i=s.defer(),n=t(o.API_BASE_URL+"/user/investor/account/info/post/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.error})},function(e){i.reject(e)}),i.promise}}function r(e){var a=new FormData;a.append("bank_cheque_image",e);var i=s.defer(),n=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function l(e){var a={ifsc_code:e},i=s.defer(),n=t(o.API_BASE_URL+"/open/bank/info/get/",{},{Check:{method:"GET"}});return n.Check(a,function(e){200==e.status_code?(h(e.response),i.resolve({success:u})):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function c(e){var a={account_holder_name:e.accountHolderName,account_number:e.accountNumber,account_type:e.accountType,ifsc_code:e.ifscCode,sip_check:e.sipCheck||!1},i=s.defer(),n=t(o.API_BASE_URL+"/user/investor/account/info/post/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.error})},function(e){i.reject(e)}),i.promise}var u={},d=function(){return{account_number:u.accountNumber,account_holder_name:u.accountHolderName,account_type:u.accountType||"S",sip_check:u.sipCheck||!1,ifsc_code:u.ifscCode}},p=function(e){u={accountNumber:e.account_number,accountHolderName:e.account_holder_name,accountType:e.account_type,sipCheck:e.sip_check,ifscCode:e.ifsc_code?e.ifsc_code.ifsc_code:"",bankName:e.ifsc_code?e.ifsc_code.name:"",bankBranch:e.ifsc_code?e.ifsc_code.bank_branch:"",bankAddress:e.ifsc_code?e.ifsc_code.address:"",bankCity:e.ifsc_code?e.ifsc_code.city:"",imageUrl:e.bank_cheque_image_thumbnail?e.bank_cheque_image_thumbnail:e.bank_cheque_image}},h=function(e){u.bankName=e.name,u.bankBranch=e.bank_branch,u.bankAddress=e.address,u.bankCity=e.city,u.bank_supported=e.is_bank_supported};return{getSavedValues:a,setSavedValues:n,lookupIFSCCode:l,lookupAccNum:c,uploadFileToServer:r,getSavedValuesInvestor:i}}angular.module("finApp.registerInvestor").factory("bankInfoService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l){this.scope=t,this.scope.modelVal={communicationAddress:{},permanentAddress:{}},this.rootScope=e,this.route=o,this.location=a,this.timeout=i,this.busyIndicator=l,this.registerInvestorService=r,this.service=n;this.initialize(),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.saveInfo=angular.bind(this,this.saveInfo),this.scope.appendValue=angular.bind(this,this.appendValue),this.scope.imageUpload=angular.bind(this,this.imageUpload),this.scope.checkImageFile=angular.bind(this,this.checkImageFile),this.scope.uploadFileToServer=angular.bind(this,this.uploadFileToServer),this.lookupPincode=function(e){var t=this;t.busyIndicator.show(),r.lookupPincode(e.pincode).then(function(o){t.busyIndicator.hide(),"success"in o&&(e.city=o.success.city,e.state=o.success.state)},function(){t.busyIndicator.hide()})},this.scope.lookupPincode=angular.bind(this,this.lookupPincode),this.scope.getKYCStatus=function(e){return r.getKYCStatus()},this.redirectToMainPage=function(){a.path(e.redirectUrlContext)},this.scope.redirectToMainPage=angular.bind(this,this.redirectToMainPage),this.scope.onContinue=function(){var o=t.getStep();1==o?(t.appendValues(t.modelVal),t.step=o+1,this.getKYCStatus()?0:t.reloadRoute("op2",1)):2==o?(t.appendValues(t.modelVal),t.step=o+1,"op1"==e.selectedCriteria?this.getKYCStatus()||t.modelVal.addressAreEqual||t.reloadRoute("op3",3):this.saveCommunicationAddressImage()):3==o?(t.appendValues(t.modelVal),t.step=o+1,"op1"==e.selectedCriteria?this.saveInfo(!0):this.getKYCStatus()||t.modelVal.addressAreEqual?"op3"==e.selectedCriteria&&t.reloadRoute("op2",3):t.reloadRoute("op3",3)):4==o?(t.appendValues(t.modelVal),t.step=o+1,"op2"==e.selectedCriteria?this.saveInfo(!0):this.savePermanentAddressImage()):5==o&&(t.appendValues(t.modelVal),this.saveInfo(!0))},this.scope.onDisabled=function(){var o=t.getStep(),s=!1;return 1==o?this.modelVal.communicationAddress.pincode&&this.modelVal.communicationAddress.addressLine1||(s=!0):2==o?"op1"==e.selectedCriteria?this.modelVal.addressAreEqual||this.modelVal.communicationAddress.pincode&&this.modelVal.communicationAddress.addressLine1||(s=!0):(!this.modelVal.frontImageUrl||this.needBackImage(this.modelVal.addressProofType)&&!this.modelVal.backImageUrl)&&(s=!0):3==o?"op1"==e.selectedCriteria?this.modelVal.phoneNumber&&this.modelVal.email||(s=!0):this.modelVal.addressAreEqual||this.modelVal.communicationAddress.pincode&&this.modelVal.communicationAddress.addressLine1||(s=!0):4==o?"op2"==e.selectedCriteria?this.modelVal.phoneNumber&&this.modelVal.email||(s=!0):(!this.modelVal.permanentFrontImageUrl||this.needBackImage(this.modelVal.permanentAddressProofType)&&!this.modelVal.permanentBackImageUrl)&&(s=!0):5==o&&(this.modelVal.phoneNumber&&this.modelVal.email||(s=!0)),s};var c=5,u=6,d=7;this.scope.needBackImage=function(e){return e!=c&&e!=u&&e!=d},this.saveCommunicationAddressImage=function(){var e=this;e.scope.frontImageUrl&&(e.busyIndicator.show(),e.service.uploadFileToServer("address_proof_type",e.scope.modelVal.addressProofType,"front_image",e.scope.frontImageUrl).then(function(t){e.busyIndicator.hide(),"success"in t&&e.scope.backImageUrl&&(e.busyIndicator.show(),e.service.uploadFileToServer("address_proof_type",e.scope.modelVal.addressProofType,"back_image",e.scope.backImageUrl).then(function(){e.busyIndicator.hide()},function(){e.busyIndicator.hide()}))},function(){e.busyIndicator.hide()}))},this.scope.saveCommunicationAddressImage=angular.bind(this,this.saveCommunicationAddressImage),this.savePermanentAddressImage=function(){var e=this;e.scope.permanentFrontImageUrl&&(e.busyIndicator.show(),e.service.uploadFileToServer("permanent_address_proof_type",e.scope.modelVal.permanentAddressProofType,"permanent_front_image",e.scope.permanentFrontImageUrl).then(function(t){e.busyIndicator.hide(),"success"in t&&e.scope.permanentBackImageUrl&&(e.busyIndicator.show(),e.service.uploadFileToServer("permanent_address_proof_type",e.scope.modelVal.permanentAddressProofType,"permanent_back_image",e.scope.permanentBackImageUrl).then(function(){e.busyIndicator.hide()},function(){e.busyIndicator.hide()}))},function(){e.busyIndicator.hide()}))},this.scope.savePermanentAddressImage=angular.bind(this,this.savePermanentAddressImage)}angular.module("finApp.registerInvestor").controller("contactInfoController",e),e.$inject=["$rootScope","$scope","$route","$http","$location","$timeout","contactInfoService","registerInvestorService","busyIndicator"],e.prototype=finApp.registerInvestorControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){e.initialize&&(e.initialize=!1,r=void 0);var a=s.defer();if(r)a.resolve({success:r});else{var i=t(o.API_BASE_URL+"/user/contact/info/get/",{},{Check:{method:"GET"}});i.Check({},function(e){200==e.status_code?(c(e.response),a.resolve({success:r})):(c({}),a.resolve({Message:e.response.message}))},function(e){a.reject(e)})}return a.promise}function i(e){if("undefined"!=typeof e&&e){r=e;var a=l(),i=s.defer(),n=t(o.API_BASE_URL+"/user/contact/info/add/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}}function n(e,a,i,n){var r=new FormData;r.append(e,a),r.append(i,n);var l=s.defer(),c=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return c.Check(r,function(e){200==e.status_code?l.resolve({success:e.response}):l.resolve({Message:e.response.message})},function(e){l.reject(e)}),l.promise}var r,l=function(){var e={communication_address:{pincode:r.communicationAddress.pincode,city:r.communicationAddress.city,state:r.communicationAddress.state,address_line_1:r.communicationAddress.addressLine1,address_line_2:r.communicationAddress.addressLine2},address_are_equal:!!r.addressAreEqual,address_proof_type:r.addressProofType,communication_address_type:r.communicationAddressType,email:r.email,phone_number:r.phoneNumber};return!r.addressAreEqual&&r.permanentAddress&&angular.extend(e,{permanent_address_proof_type:r.permanentAddressProofType,permanent_address:{pincode:r.permanentAddress.pincode,city:r.permanentAddress.city,state:r.permanentAddress.state,address_line_1:r.permanentAddress.addressLine1,address_line_2:r.permanentAddress.addressLine2}}),e},c=function(e){e.communication_address=e.communication_address||{},e.permanent_address=e.permanent_address||{},r={permanentAddress:{pincode:e.permanent_address.pincode,city:e.permanent_address.city,state:e.permanent_address.state,addressLine1:e.permanent_address.address_line_1,addressLine2:e.permanent_address.address_line_2},communicationAddress:{pincode:e.communication_address.pincode,city:e.communication_address.city,state:e.communication_address.state,addressLine1:e.communication_address.address_line_1,addressLine2:e.communication_address.address_line_2},addressAreEqual:e.address_are_equal,addressProofType:e.address_proof_type,permanentAddressProofType:e.permanent_address_proof_type,communicationAddressType:e.communication_address_type,email:e.email,phoneNumber:e.phone_number,frontImageUrl:e.front_image_thumbnail?e.front_image_thumbnail:e.front_image,backImageUrl:e.back_image_thumbnail?e.back_image_thumbnail:e.back_image,permanentFrontImageUrl:e.permanent_front_image_thumbnail?e.permanent_front_image_thumbnail:e.permanent_front_image,permanentBackImageUrl:e.permanent_back_image_thumbnail?e.permanent_back_image_thumbnail:e.permanent_back_image}};return{getSavedValues:a,setSavedValues:i,uploadFileToServer:n}}angular.module("finApp.registerInvestor").factory("contactInfoService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l){this.scope=t,this.scope.modelVal=r.initializeModel(),this.rootScope=e,this.route=o,this.location=a,this.timeout=i,this.busyIndicator=l,this.registerInvestorService=n,this.service=r;this.initialize(),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.saveInfo=angular.bind(this,this.saveInfo),this.scope.appendValue=angular.bind(this,this.appendValue),this.scope.imageUpload=angular.bind(this,this.imageUpload),this.scope.checkImageFile=angular.bind(this,this.checkImageFile),this.scope.uploadFileToServer=angular.bind(this,this.uploadFileToServer)}angular.module("finApp.registerInvestor").controller("identityInfoController",e),e.$inject=["$rootScope","$scope","$route","$http","$location","$timeout","registerInvestorService","identityInfoService","busyIndicator"],e.prototype=finApp.registerInvestorControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){return{maritalStatus:"1",gender:"M",nationality:"INDIA"}}function i(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/identity/info/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?(u(t.response),e.resolve({success:l})):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function n(e){if("undefined"!=typeof e&&e){l=e;var a=c(),i=s.defer(),n=t(o.API_BASE_URL+"/user/identity/info/add/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}}function r(e){var a=new FormData;a.append("identity_info_image",e);var i=s.defer(),n=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}var l={},c=function(){return{marital_status:l.maritalStatus,gender:l.gender,nationality:l.nationality,sip_check:l.sipCheck,ifsc_code:l.ifscCode}},u=function(e){l={maritalStatus:e.marital_status||"1",gender:e.gender||"M",nationality:e.nationality||"INDIA",imageUrl:e.identity_info_image_thumbnail?e.identity_info_image_thumbnail:e.identity_info_image}};return{getSavedValues:i,setSavedValues:n,uploadFileToServer:r,initializeModel:a}}angular.module("finApp.registerInvestor").factory("identityInfoService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l,c){this.scope=t,this.scope.modelVal=r.initializeModel(),this.rootScope=e,this.route=o,this.location=a,this.timeout=i,this.busyIndicator=l,this.registerInvestorService=n,this.service=r;this.initialize(),s.get("modules/common/config/contry.json").success(function(e){t.countryList=e}),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.saveInfo=angular.bind(this,this.saveInfo),this.scope.appendValue=angular.bind(this,this.appendValue),this.scope.imageUpload=angular.bind(this,this.imageUpload),this.scope.checkImageFile=angular.bind(this,this.checkImageFile),this.scope.uploadFileToServer=angular.bind(this,this.uploadFileToServer),this.checkKYCStatus=function(){var e=this;e.busyIndicator.show(),this.service.getKYCStatus(this.scope.modelVal.panNumber).then(function(o){e.busyIndicator.hide(),"success"in o?(e.scope.modelVal.kycStatus=o.success.status,e.scope.modelVal.kycStatus&&(e.scope.modelVal.applicantName=o.success.name)):(t.errorPopupMessage=o.Message,t.ngDialog=c,c.open({template:"modules/common/views/partials/error_popup.html",className:"goal-ngdialog-overlay ngdialog-theme-default",overlay:!1,showClose:!1,scope:t,preCloseCallback:function(){t.modelVal.panNumber=""}}))},function(){e.busyIndicator.hide()})},this.scope.checkKYCStatus=angular.bind(this,this.checkKYCStatus)}angular.module("finApp.registerInvestor").controller("investorInfoController",e),e.$inject=["$rootScope","$scope","$route","$http","$location","$timeout","registerInvestorService","investorInfoService","busyIndicator","ngDialog"],e.prototype=finApp.registerInvestorControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){return{occupationType:"",income:"",countryOfBirth:"India",investorStatus:"Resident Individual",dob:"1991-01-01"}}function i(){var e=s.defer(),a=t(o.API_BASE_URL+"/user/investor/info/get/",{},{Check:{method:"GET"}});return a.Check({},function(t){200==t.status_code?(d(t.response),e.resolve({success:c})):e.resolve({Message:t.response.message})},function(t){e.reject(t)}),e.promise}function n(e){if("undefined"!=typeof e&&e){c=e;var a=u(),i=s.defer(),n=t(o.API_BASE_URL+"/user/investor/info/add/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}}function r(e){var a=new FormData;a.append("pan_image",e);var i=s.defer(),n=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}function l(e){var a={pan_number:e},i=s.defer(),n=t(o.API_BASE_URL+"/open/verifiable/kyc/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}var c,u=function(){return{country_of_birth:c.countryOfBirth,political_exposure:c.politicalExposure,income:c.income,occupation_specific:c.specificOccupation||"",applicant_name:c.applicantName,pan_number:c.panNumber,place_of_birth:c.placeOfBirth,father_name:c.fatherName,mother_name:c.mother_name,investor_status:c.investorStatus,occupation_type:c.occupationType,other_tax_payer:c.otherTaxPayer,dob:c.dob}},d=function(t){c={countryOfBirth:t.country_of_birth||"India",politicalExposure:t.political_exposure,income:t.income||"1",specificOccupation:t.occupation_specific,applicantName:t.applicant_name,panNumber:t.pan_number,placeOfBirth:t.place_of_birth,fatherName:t.father_name,mother_name:t.mother_name,investorStatus:t.investor_status||"Resident Individual",
occupationType:t.occupation_type||"PRI",otherTaxPayer:t.other_tax_payer,dob:t.dob||"1991-01-01",imageUrl:t.pan_image_thumbnail?t.pan_image_thumbnail:t.pan_image,kycStatus:e.userFlags.user_flags.kra_verified}};return{getSavedValues:i,setSavedValues:n,getKYCStatus:l,uploadFileToServer:r,initializeModel:a}}angular.module("finApp.registerInvestor").factory("investorInfoService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}(),function(){"use strict";function e(e,t,o,s,a,i,n,r,l){this.scope=t,this.scope.modelVal=n.initializeModel(),this.rootScope=e,this.route=o,this.location=a,this.timeout=i,this.busyIndicator=l,this.registerInvestorService=r,this.service=n;var c=this;this.initialize(),this.scope.reloadRoute=angular.bind(this,this.reloadRoute),this.scope.saveInfo=angular.bind(this,this.saveInfo),this.scope.appendValue=angular.bind(this,this.appendValue),this.scope.imageUpload=angular.bind(this,this.imageUpload),this.scope.checkImageFile=angular.bind(this,this.checkImageFile),this.scope.uploadFileToServer=angular.bind(this,this.uploadFileToServer),this.lookupPincode=function(e){r.lookupPincode(e.pincode).then(function(t){"success"in t&&(e.city=t.success.city,e.state=t.success.state)})},this.scope.lookupPincode=angular.bind(this,this.lookupPincode),this.redirectToMainPage=function(){a.path(e.redirectUrlContext)},this.scope.redirectToMainPage=angular.bind(this,this.redirectToMainPage),this.processNomineeAbsent=function(){this.scope.modelVal.nomineeAbsent?this.scope.saveInfo(!0):this.scope.reloadRoute("op2",1)},this.scope.processNomineeAbsent=angular.bind(this,this.processNomineeAbsent),this.scope.showGuardian=function(){if(!c.scope.modelVal.nomineeDob)return!0;var e=new Date,t=new Date(c.scope.modelVal.nomineeDob);return e.getFullYear()-t.getFullYear()<18}}angular.module("finApp.registerInvestor").controller("nomineeInfoController",e),e.$inject=["$rootScope","$scope","$route","$http","$location","$timeout","nomineeInfoService","registerInvestorService","busyIndicator"],e.prototype=finApp.registerInvestorControllerPrototype}(),function(){"use strict";function e(e,t,o,s){function a(){return{nomineeDob:"1991-01-01",relationshipWithInvestor:1}}function i(){e.initialize&&(e.initialize=!1,l=void 0);var a=s.defer();if(l)a.resolve({success:l});else{var i=t(o.API_BASE_URL+"/user/nominee/info/get/",{},{Check:{method:"GET"}});i.Check({},function(e){200==e.status_code?(u(e.response),a.resolve({success:l})):(u({}),a.resolve({success:l}))},function(e){a.reject(e)})}return a.promise}function n(e){if("undefined"!=typeof e&&e){l=e;var a=c(),i=s.defer(),n=t(o.API_BASE_URL+"/user/nominee/info/add/",{},{Check:{method:"POST"}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}}function r(e){var a=new FormData;a.append("signature",e);var i=s.defer(),n=t(o.API_BASE_URL+"/user/save/image/",{},{Check:{method:"POST",headers:{"Content-type":void 0},transformRequest:angular.identity}});return n.Check(a,function(e){200==e.status_code?i.resolve({success:e.response}):i.resolve({Message:e.response.message})},function(e){i.reject(e)}),i.promise}var l={},c=function(){var e={nominee_name:l.nomineeName,nominee_dob:l.nomineeDob,guardian_name:l.guardianName,relationship_with_investor:l.relationshipWithInvestor,nominee_absent:l.nomineeAbsent,address_are_equal:l.addressAreEqual};return!l.addressAreEqual&&l.nomineeAddress&&angular.extend(e,{nominee_address:{pincode:l.nomineeAddress.pincode,city:l.nomineeAddress.city,state:l.nomineeAddress.state,address_line_1:l.nomineeAddress.addressLine1,address_line_2:l.nomineeAddress.addressLine2}}),e},u=function(e){e.nominee_address=e.nominee_address||{},l={nomineeAddress:{pincode:e.nominee_address.pincode,city:e.nominee_address.city,state:e.nominee_address.state,addressLine1:e.nominee_address.address_line_1,addressLine2:e.nominee_address.address_line_2},nomineeName:e.nominee_name,nomineeDob:e.nominee_dob||"1991-01-01",guardianName:e.guardian_name,relationshipWithInvestor:e.relationship_with_investor||1,nomineeAbsent:e.nominee_absent,addressAreEqual:e.address_are_equal}};return{getSavedValues:i,setSavedValues:n,uploadFileToServer:r,initializeModel:a}}angular.module("finApp.registerInvestor").factory("nomineeInfoService",e),e.$inject=["$rootScope","$resource","appConfig","$q"]}();